apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVVlZHaWdzNmRZNW1VYkFhTnJ3KzkyWHdpRzFVd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFMQpNakF5TnpBeVdoY05NekV3TVRFME1qQXlOekl5V2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFEZ0VLSkxYcExNYWxGcmZRYU5OeW04bHBhYU44REQ2SFdUUUZKdCtZNTJGUERlK3FDTQp3Q0xHS0VCRjNMd21BV0c3WmFVNktUWE40UHZtYW5QWmx6ZTQybEYrckZ4aDRVVEFrNE9WY21XTkZGYjV3dkFHCkVHdDk1cTBDV0hSZUhqMnRoaUlFaWp2dEgrNEs2VWtUTjBqdTFNMGd4WDFhaDhkSWE0d050Q3Frd01LRFgybTYKdXhlZldWbTFObWZhUlkxWkJ1MDVZNTRYYkQwQjYyb2NSYmxxZDhBZjBiaXV3SEQvOG1WK2RDdkdhSEVOTFVGcApVNmMwWk1BUGREYzAwZnhPeGswM0RFZGFsNmtWQWo5eENqU0hOU25NNDFWSUhEdUx1NkRYV1ZlNzV6L0J6MFRTClJQNTdiSXZxa2NrL1NwNjNTU1hpSmdkRE9aUHZEYVZZMVo4OUFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkVtNXRJblUzY1F2OUJuMwpMYXJQeFdsUjdvL3lNQjhHQTFVZEl3UVlNQmFBRkJLZG04dk9nNk05N1o5NG1tK2NnYytlZUtFZU1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQTBleHZqNWFVCjlsTEZkS04wMGVvdGovR3A4cG5rWDAwYjVMUkN4b0tUTU9ZOTlaMk84RnlLbk1mSVZPcThNdC9Zc05KdlArajYKZW9keFVLdTg4U0xDa096TEVNMXNJd1lYakNBbWQ3cWJPZHJ6dlIyQjZ0ZzlvUldqSExMNXRVbStwVDd1bTFVVwp5cHhVc01xa1ViMUc3UGlyM3JsK3pub1ZXMXJqTlJHK2pFUDhZdndNdWROSjlsTjliSEc3V1lOZk5KOGMyY20wCkFNckNSbUg3alB0SU9QRGEvTWFud1BvL0s1ek12aE50cE1BTmlPbGVKQlBuOHYvNWpwMGVRNmJpNklBamRiTXgKTU4vWkxzdVlwaVRmZnA4czlOcC9Kc0dLUm1aSStlQlNpaU9kMlZybDgzZkZmbGRJWnFNUjBqVzRodllvcnhoMwpLR3k2Qkp2bDduSXRrZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVR0EwanZrRGsrT2FnUEE1VkdORDdXMzg3OWFFd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXhOVEU1TWpjeU1sb1hEVE14TURFeE5ESXdNamN5TWxvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRRFRSaGtMWXpPTlN6ak00dEZCWnRFM3UzUk55MGVUeWh1ZWF6NEdHMU9PVHZuUEJEd0syejlLCkp2aDNiUlVYeHlRQ2ZKdUpiTm51M3VabUx5cUdIWUtFQTZkczc2QTd3QnpHUG13by9tVkZ1SEk5amtRekRzdlQKdVkzNU05eEtBWlAxaWpoVUVRV0JxVFJYZWtOanAyZ21UWFU2SmNJWDRCNzdRQStaVnZkL1pZNzJRZzZBb1pCVgp5VHVpb1JxM0ZaRWhmamZSam5mYmFQL2ZLSnhHdWgrN01kcFAzanpvbUFXTEN2a29abGNyM09ORjFsN2ZOeWh2Ck5HdnR3OVh3VGV5Nm1lYUdDWWlPaUl6cEJUek43YVoxWmlWQmc0blNhc0hKOVlhMU01RFBpdkpDM084Z3M5TE4KVmFzYzZWRVFQM0s5YkpSUjFPTUsxOTlxdnYyYVJuc3hBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJRU25adkx6b09qUGUyZmVKcHZuSUhQCm5uaWhIakFmQmdOVkhTTUVHREFXZ0JSRTdMQTl2U2dWelRnWUNvaVM0Vmp1MzVCZFlEQU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBSi9iMmpDZWdiVVg2bXVRci9TRUF4ZytCdnZlQnpHMzdCa2Y4bnBOZHBFME5UK2IwQVdWZApsVkJBUXRoczFpcjRmTXo4K1hUQ1lvbDNjcGVyOXluWm5SQW90TUNFQnQwdktmUnRwUG8xSUNwMWR1WnozVlRmCng5ZjNoY2QvNFQ2dnppclEvQjBxNXNvdXRkaGF2MFA4Qi9ya3hKRjMyNEd5NStUQ1pjZGhwMU0yaGduUXA1dm8KMHR0VTljeDBaV0dRN2w0ZWVzMzR1QmwvVGJzNk5neUFEN1YzaWRiclpoK2lrSG5TVXNFMmlCZ2JUV2xYWURKOQppcWRlOE9hTHFpRFBMdnBlQjA1UEFmUEh4R0tnVmNMbEprNmtRWENpd0FSb1FpVFZkV21sRHpoZk96NHhlRllBCnI5S1VGRm5NOFpyb08yR3lNcktUeUpBS2J1M0lkbFdjdHZibEd6WnRuUEF4eE96MzhObnMrblVWN2Y4TThXdGsKaGpXa2twUE9hU0NMWlk0Z05iR0tmVlYxZXVsWWtGTnlSNUx4cnFtcW1qeFgrNXVwaEU2aTJDajlkRFF1ajNURQo5L0RCLzBRYWJ4Zm0rdC9DQjhpVUh0eHgzc3VoZjVvOHRsVFF6Qk5nbytIZFNCdVhZc3RvUGZCK0gxMGZkYzlZCjZSRG1COXJjdjNDUS9jbldlZ0RkdkwzckxoUGFHT3A5eEVkSnlUVjVjRzNtdDBCNnE3aTByQjdjcmhqWForK3oKM2JHaHZPbFhmVHNLc1NTeFVBSUVNMUxUWk1KYWpaWHl6MWo4eThyRWM2Rmx6OHpCM2g0K2dSVG9ac2x0UnFDbQoyR09tT2RLWUdSZTFLakRiaGhXQWZYa1RXblRaVTJGWlBWdHA2OXA0TmNBTmIzcWc2b1RieUs4PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFLV0JRbjJwMjdwa01BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNRGd5TWpJMU16VmFGdzB6TmpBeE1EWXlNakkxTXpWYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBTnRyS2tTSGhGY1lYL1A4L0RTV3NTQ3BFZDFhZnZaREhKV01adFN1WnpkTjZ2SlgxdlpzClNtUmZkdWVOaEdibVNLUVFiTmR1eUNnbmVObFI0MGhxZ0VYRkRTMy9VQm9TdFVIU2JUTzJDTVZZaFFQVk5aNG0KcjUyRzhOdi9ETEhDb3d0YTFJamlTZmtudDRUT1VaK044eldBdUxnZDQ4SjNCejNUaE5wd0xEYTFabjJjZll2RQo0UU9Kbm4wUmk5eGRSbVhBVmNJNmhpR29hK013YXZJZWFkVEk4UXdBS3hpRk1KdUNiY3ZjN0pBeXFOcGJuVWtaCnpMc2tLZXA3UFZYSXM5UGNWckVnZTVBd3dzTVgyRFE5M1MwVUMzZDhVVkFOSm1KdmVNVXpNYlBmRE5WM1pxUlIKbjhLZ3ZFbUd3WUtkMC9oUEZRYmNsamE0eTFyM2Y3eXgvQ3c0NU9EREpoMzF1RmQ4NjZqYzhwT0RUSXUvczVNMwpTSWsyUFJGL0x0UWR4YkVFTldyQmNGUVlBWXFNWFhqRDludTEyZDVyaXVNWGdaWWVXZDM1UG9NQzFId0pndlZ1CmVrVjVaWmtSVEpxMXhIb25IRE4xK0xpcERta1AxbTlreGZWTGpzMmh5UUlLODJRbUJqKzZsUjludFg2b3NIMS8KRFB3OGVNZFl0U2pyV3UwdStCMzRGOWdScmZ6bi9WNEhZbXBsQ1F3T29LMllnR2FSdi84KzBUN2RXS01jVWkxRQpMRGZuNTN0T0tyTUROcjlHcDlzbk5qMTVEQXZ0YmJTVkcrTEkyeEdnekJJTlZCMFlUd3pVaE0zM0hPUFEzdURYClRWSDRWOWo1VnFEd3BKWWd5dlhqRklQK3NvdllBU0NsQzEveW1LUWJ0UkhRa0ZZM0lNazloZC9CQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlJFN0xBOXZTZ1Z6VGdZQ29pUzRWanUzNUJkWURBZkJnTlZIU01FR0RBV2dCUkU3TEE5dlNnVnpUZ1lDb2lTCjRWanUzNUJkWURBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQXlKVFU0ZGxKQzJMZ3B6RkFIL0lrdU1PZlFhbkQKN3IxQmcvWFRWQ1VycForMWNEWjErR3pBcFJnQ2FUS0x0TkY3RWtnVnJldXJNT2NsTW9pYTdmOHpwRlhZUDJhRQp5aE1yWEpMbnFQd0NmOThvOWhVYjR3YlRVS09Udnd5bGdqbnVwR05xdDFwZjlBVWFFVEVFQzJDVEZBNWwzQ2xpCks2OFNrWlpPS1VtT1VRbGhUZ0szaFNxOGJ3dFdHU3ZERjRTY0dOczRBMXFuOUhCa3VzZFJHRDcyKzdXZ3o5amoKWXpub3U3WVd4RTYzVXNFTEplbDhxdmRvN0VodHBHdXFNMDcxQkNOc040bitVWFlhV1RnaG9EVk52Znd6RXdXMAo2V3Q5akJBWHZ2NURBZGpkWU1FNlMwMkJiaHkvRWd4dzVTQVdRZVpXU05sZHhXUnV4Ukl0TU4wK1NWNDVKNzlVCmlzd2tkQTBQYk5XWGxYY3pmYnQ3NG0vSlAvU25GZkF0YVlwRjAwclMrZGI0RGdFSHBiY1VtdXJzVmVvbTlEaGsKaTZkOHNHakNaaUtsVVQvVC8zSU9ReS84Nm1qVDNKU1U5ZCtkYXdyS0k2M2c0MVp1Y1hxV1RWMEYyTWZ0Q1JHNwpTRzRiYklNQktOa1FidnAyblNlN2t3amhuMmxONCtXYlVHVVRUdjU2L291OU14QjMrang1SEd2RU9uVTQvbkxUCkRwRCs3S0NUVmpKVXIyQmU1WGhTVzJ1bUs2N3FnU3ZycUlEbXNRUEFtZDdGYVMrUVhBSTA2bkx1bkRlMGYrMHIKWktQclRpOVc4LzBQYXdRSnpaMGJ6c25CSE50ZUxGQUtlL3Q5aEhmUjJyZnEzbHFzenRJMTY1VTRUYWdZOURtSwpMUklSVWd0NytFWFk4QTA9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
