apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVU09sU1hUWEZ1VVNnaERsSUFsWDlLMkNSdnFjd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFMApNVGt6T0RVMldoY05NekV3TVRFek1Ua3pPVEUyV2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFEY1NRcTZyY3JQWUJUOExqeE1NcFZrNlpmeFZQVURZQ0x1SjZGbmkyQjU2Z2NoMSt6bgpmWmFQUXhjTC9Vdm15c0c4Z1VmZzhSRmNWdzFabUxnRHc2UFRnQkhSMXZZTEpQdERrVUdoOWJ6Tkh6dGM3WUZlClBta09WMlphRmFRd2J1R0pwcjZDekp0UHJFcTI3ZjRWb3VEVS9nelV5QUlPeWl0SGwwRG5pQ09UTW16bEhGQkIKRE9sSW9CdDZLZnhWNFFDRE5HUjV2bFBRZEdGRlNGdkdJVlc4SDhDRGRIZWpLL2Rqd09yRFJLSC85KzlrVDFRaApYQmxLbVFRb0RyVCtreGV4OENwOWFPZjhJaVR0R2hUOGFMaG5UUkw3V25pU0ZzSWpjWVpLb3RFQjhYV1gzTWs4Cm0yZFdQQ1BWWkdzdFpiTndBUUlsMytHRjcybGwyc0pKMjZxZkFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkZTMkViYWVEVzVQeEoybwpaakFLTmFyM3VNa1lNQjhHQTFVZEl3UVlNQmFBRk9CenZjY1BOLzY5ZHh2VDkrU1REUDNhd25NZE1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWViYUJ3WGtICmJHeXR0cnpJYWJHSzRCcVNSVVFHMUtKaEJZR2s4Tm9YZTcwNVNtLzNieFVtTWRScDUrR29NWkJyaEtPelBnQjIKbTR0bTQvNzNmKzZWano4QU9JQWpXM0lEc0NuMTJGM3EwUW9MWnlTQmFmZTlRVmNkODc5OVAvMFpWNHB2bFFqaApMZnBtWVJ3TXplSjBHQ1BURmJjN3V4WGgyUm5LT2s4cGxIQXRvTFkwRGgyaExRNWFjZGlXdlNuV2FQcXpZQTZOCnBaZ1FQUWJob1Z6RUszbmVJM1JHTW5nL2F0YXpWbEdHcVpCTk5OZ2xSeGd6aE5qdDA0b0VvdGc3REpacFpnSlgKM0hrQ0RXNXB6YXVTYllBWHNLVjZQNTQzaW5zZWk3KzRtaWU5dVp3aVNodGxGWDU0Qlo5YUpXWkVKVnV4dFZJNApkbXJnZGRFRG0zcENDUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVZkpYaTIyQlRjRXcwaExVQVo2M3ZUdTc0aVM4d0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXhOREU0TXpreE5sb1hEVE14TURFeE16RTVNemt4Tmxvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRQ3ZlNSt0cDVqNDFlZGNGSko4Mjc2WkN6YVhFMVhQRmlNcWd0a0tUeTZCY2kwMUpzd3FycVNzCjdNV2ZmMXFUSHZRL2pWSmJ2N2FNMUZZc28zbTBzQVQ0SGNRMVMwVnJ5UDk5QSt5bFU0Z05UaG9lUUtIamFFUHEKVC96eVB5MU9yU0lOY255MFpZcnB1cFZpT3lRK1RyMFBZamN5bE9LY3dxV0dLaGZubE9sbFZTQjEwSzhVQmtQNAo2ckE4d1oyL25KVG03aldZRDN0NGFUS1UvVHhiZUZadG52RTk4SDNtcHh6b1NlZ1k3ZUFsS1lyL2YxdlJUa3EwCnYxYWYwdVpVeS9DaWNzZUhMcWVPL3lySnJGWTNVVFNncUpWWllOT05RMThQSklxVkZpQjJpcW1Fa2xQVTA4dGwKazN6WWp0R1NYeXpuKzZLV1k2Tm1JVDk0a2k1dXQ5dmxBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJUZ2M3M0hEemYrdlhjYjAvZmtrd3o5CjJzSnpIVEFmQmdOVkhTTUVHREFXZ0JSRTdMQTl2U2dWelRnWUNvaVM0Vmp1MzVCZFlEQU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBUjVXc1dPWWhEK01pd25IZEF2eGlRR3ZSQWFDSk92WmlDQ0EzYUNzbU1KTGFlclA1cXZ3aApWSnVqVm44VTAra0lQS0wwWmNXTjRvZTk3aHV3ZFVVeHZlb0FkcHpVL0xTeVVZNXZTODI5QUZVOElPMHNXSHMvCkhxbmJYN01pZC9yNjM3SW9veHFjRVc5NWhOYjA1UzNUaElPQ2prYXh2M3RreVRGbGp3R0dNb2Voc2VveW5SSXMKRmlMUmd2M2Q3ZkNFbWRuWlU1L3EwdVF4NHR2alV2dlRWeGwwY1ZYTTZHVlFWcUNqazExWk5nbXJrT2swR0dkZAp4T1duNENrQ2p1NGc3VXI2c3U1NzRjWnQwQlJrV0dMcWtBWDg3cUxOamVYTE5GTjhuSHZ6TFdCSm56bWtvWVg1CitlRVhVa21wUGVXVTlWSXl2Z0RMTzUxeUJYZlRFVDRTaCszaVdGTjdzdmJ0bWdWOHNHbnpYZnB4K3dVa1BCK3AKclo4TDdUbVArZDlxTEt5ZmRJNzR1bDd5bVVveWUzdlpDdEp4UTFGbjJJd0xpWithODBpMkVZbkxPbU5FaWN2Vwordm5OMTJYWWZrWWFVRnZEK0VMWktNSlZWSHVObXB6VTlMRGd5Vi92bkhIV0NoWmhLRi83MUdKQ3NaY29TL3BCCjRUWUR4aU44a2VXV3dRbFA1Qmh2aEh0L2E5VldTSnBPOEUwMFZ2TTdTbVB4TktrcEI0SjRoMGJFUzNHcWxyZEsKOTE3YkhZU3pGZjFNRWFPeHU0Vk52akFJSnE2c3EzeU5OdkxocHNEMkNJUWJJT0RHWGQ1dlVWYThwZnhvcnZvRgo5U2tnclZJb3pUQ0R1UFNIL1k4VVJTMTZUMWdDYkZuaGVnajlWRE96S1J0M0dPeUlGTVl2QytBPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFLV0JRbjJwMjdwa01BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNRGd5TWpJMU16VmFGdzB6TmpBeE1EWXlNakkxTXpWYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBTnRyS2tTSGhGY1lYL1A4L0RTV3NTQ3BFZDFhZnZaREhKV01adFN1WnpkTjZ2SlgxdlpzClNtUmZkdWVOaEdibVNLUVFiTmR1eUNnbmVObFI0MGhxZ0VYRkRTMy9VQm9TdFVIU2JUTzJDTVZZaFFQVk5aNG0KcjUyRzhOdi9ETEhDb3d0YTFJamlTZmtudDRUT1VaK044eldBdUxnZDQ4SjNCejNUaE5wd0xEYTFabjJjZll2RQo0UU9Kbm4wUmk5eGRSbVhBVmNJNmhpR29hK013YXZJZWFkVEk4UXdBS3hpRk1KdUNiY3ZjN0pBeXFOcGJuVWtaCnpMc2tLZXA3UFZYSXM5UGNWckVnZTVBd3dzTVgyRFE5M1MwVUMzZDhVVkFOSm1KdmVNVXpNYlBmRE5WM1pxUlIKbjhLZ3ZFbUd3WUtkMC9oUEZRYmNsamE0eTFyM2Y3eXgvQ3c0NU9EREpoMzF1RmQ4NjZqYzhwT0RUSXUvczVNMwpTSWsyUFJGL0x0UWR4YkVFTldyQmNGUVlBWXFNWFhqRDludTEyZDVyaXVNWGdaWWVXZDM1UG9NQzFId0pndlZ1CmVrVjVaWmtSVEpxMXhIb25IRE4xK0xpcERta1AxbTlreGZWTGpzMmh5UUlLODJRbUJqKzZsUjludFg2b3NIMS8KRFB3OGVNZFl0U2pyV3UwdStCMzRGOWdScmZ6bi9WNEhZbXBsQ1F3T29LMllnR2FSdi84KzBUN2RXS01jVWkxRQpMRGZuNTN0T0tyTUROcjlHcDlzbk5qMTVEQXZ0YmJTVkcrTEkyeEdnekJJTlZCMFlUd3pVaE0zM0hPUFEzdURYClRWSDRWOWo1VnFEd3BKWWd5dlhqRklQK3NvdllBU0NsQzEveW1LUWJ0UkhRa0ZZM0lNazloZC9CQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlJFN0xBOXZTZ1Z6VGdZQ29pUzRWanUzNUJkWURBZkJnTlZIU01FR0RBV2dCUkU3TEE5dlNnVnpUZ1lDb2lTCjRWanUzNUJkWURBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQXlKVFU0ZGxKQzJMZ3B6RkFIL0lrdU1PZlFhbkQKN3IxQmcvWFRWQ1VycForMWNEWjErR3pBcFJnQ2FUS0x0TkY3RWtnVnJldXJNT2NsTW9pYTdmOHpwRlhZUDJhRQp5aE1yWEpMbnFQd0NmOThvOWhVYjR3YlRVS09Udnd5bGdqbnVwR05xdDFwZjlBVWFFVEVFQzJDVEZBNWwzQ2xpCks2OFNrWlpPS1VtT1VRbGhUZ0szaFNxOGJ3dFdHU3ZERjRTY0dOczRBMXFuOUhCa3VzZFJHRDcyKzdXZ3o5amoKWXpub3U3WVd4RTYzVXNFTEplbDhxdmRvN0VodHBHdXFNMDcxQkNOc040bitVWFlhV1RnaG9EVk52Znd6RXdXMAo2V3Q5akJBWHZ2NURBZGpkWU1FNlMwMkJiaHkvRWd4dzVTQVdRZVpXU05sZHhXUnV4Ukl0TU4wK1NWNDVKNzlVCmlzd2tkQTBQYk5XWGxYY3pmYnQ3NG0vSlAvU25GZkF0YVlwRjAwclMrZGI0RGdFSHBiY1VtdXJzVmVvbTlEaGsKaTZkOHNHakNaaUtsVVQvVC8zSU9ReS84Nm1qVDNKU1U5ZCtkYXdyS0k2M2c0MVp1Y1hxV1RWMEYyTWZ0Q1JHNwpTRzRiYklNQktOa1FidnAyblNlN2t3amhuMmxONCtXYlVHVVRUdjU2L291OU14QjMrang1SEd2RU9uVTQvbkxUCkRwRCs3S0NUVmpKVXIyQmU1WGhTVzJ1bUs2N3FnU3ZycUlEbXNRUEFtZDdGYVMrUVhBSTA2bkx1bkRlMGYrMHIKWktQclRpOVc4LzBQYXdRSnpaMGJ6c25CSE50ZUxGQUtlL3Q5aEhmUjJyZnEzbHFzenRJMTY1VTRUYWdZOURtSwpMUklSVWd0NytFWFk4QTA9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
