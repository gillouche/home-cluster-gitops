apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVRFNvVVYxRFVvK1pMKy9CTU1XSThwTlpUaFAwd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFNApNVEl6TVRNeldoY05NekV3TVRFM01USXpNakF3V2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDbDNzd2d3MDFZbTZReGl4dzdOc2xOd3JhaUEwcDNSUkF1NEg5MlBmVnZrc0krZC9qNQpLUXhtSVpPS2VOVHVCbnFFSE14S0FMbTdUS2pzZkZmcDZDeE1MaGNJZzF1bU4yMEVXSE5sUUljVTRUWjVKT3VlCmU2TlI1Qy8vQWE4MU9zWGNXRGNJREI5czRPZnZETk9INnExZzhTa3Q1UzZldjNWS2xrS3ZoUEhyRGQ5SVlpc2sKa1dIaytLSEJ4UVdnU2lOSFNmdTlydTg3bDNIRFZ5dUZYcG9yMHVxZ0VscXAvRFppWlpXMlhrc1N2TWtZUmtSdAp4eGdEU2oySXZIY1NvRXltcEVMSzVhYm1uSmpLVTRqY2FJR0dNcitQTTBZK3JWL3hNWi9PditrU3RKRDVwQzZoCjJXS000ZE5JTFNuMUQ1WU5OeElXMW9abjQrRVJETHcveVBBVkFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkkxYTJobkk5T01lSFliSApNSXNEdk1sRGdDdFdNQjhHQTFVZEl3UVlNQmFBRk9FNWhtN3BKOGxLMitiN3E2Z1RGOEhweWtkME1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQVRaUEZYYlJMCmQ2aE9uZXdJWUc0ajhhTUpNQWRrNDh5dEFSZk1vcEpIZkZLVkdwZWJ4SW5iQVc1RitEUmxUaUJXNWgyN0REQ2cKNkVJYXdXSStiR3I2dlNhNGUvV2Y1WHdKRW9pakplRjZrNWNJNTU5VTkrZmVNeVkwUnJtVnB2dFBQRkpON243Tgo3UU02VGc3YUJ3UHIzYkR2bTVwQmpUTUdNemtjL0szdFFsRFJnVW9GaUpYNUpGUU9xdGNIdWhlSjVYeHhCMkNjCkFnbXpxbGtLMzVyeElONkMrRkFnN3cwaWUwUytYQUtGSUd4WGRNNVFtY09DYVVjeURwSkt1VDFPbXc1VE4yTzgKY09haFdOM2UrdzdtV3dyZDJtUXhNS1oyVVc4VVNNS0JrOUVKdnRXeU5LajJQSnArYmYzV0hnT1YvWGIwZVF0WApYWFFqSVhySTZ1ZE54Zz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVWi9HZ0psY0plK2lEdk1FM3BQMGwweDZRZXdRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXhPREV4TXpJd01Gb1hEVE14TURFeE56RXlNekl3TUZvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRQzBmRWlRTjBHdGZuQlhQZytQdCsralRiTUNCNGh6QTAyZ2FKY2lvdW5ZSll4ZUQ5NmVyc05MCmNHVmNvakVHS0dDY0hyV09GazMwZHppZXJlNmx6a0JUS1ppUi9lT29CWTBQWGVSaXdaTVVKVjRadGVhaUNmUDgKOXROWnJvUjdGUFlMRkFBc0xqRnM5SXpyelpxSmFYQUxlcDB5U2JFRk9CWkVRaVdkbjJuNDQxMlBkQUo2UUtGcwozUHY1QXVuYXpOazdwTzlQUFBKYWFTUGtMRC9MemF6VWJ1VVpwZjBEMWQyTTErWUFxMDQvaTJzcGZTZzRFQUIxCmFaNzZNZ09pUmk0Z1BRS2d1K2l0YlNwamZJQk9DWjNqK0ZkY0lvNlRiR2JURzUyazlBWnJ2bk4zZWdXUC9Ea3UKZk5NWVp4VDVIOGdlUWJ3NUJGQWN4WWlyWi9lUzFjbVBBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJUaE9ZWnU2U2ZKU3R2bSs2dW9FeGZCCjZjcEhkREFmQmdOVkhTTUVHREFXZ0JTVjY2UHg3VHFIcjVRb3VGdkpoRnpBL2VWQ2x6QU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBamhUR0tCa0s2bGE2TXNyWDhRdHZZOGJpd0pQbDZ3VHVRbW1sS0RPS3RzR3lhSzNsT1g0VQprb3hjTG5GbG5naEdKczE1RVZkQVpkcEJDSjhUdmhENE8vcTd2OGpPU01hdkZUemVRalR5V3FnRDFNMkV2dXY1ClVUY3BJZkIrOWgxWEUyU09YeS9Qd0FFdHZIZnk0bWY3ampJTWNjaUF3YUgzL1dKM1J4WTdIWGJhV2ZzUkwxMWEKNXVzeWRVeXNrdFdxUHBxZjFiSXZtbEh1RENGR2pyUU1XUk1iNnZ5OVRNVEd6YUQ2Mk1vTDlXVnBMbzVnODd1OQphNEVXeUw0ZXdhS0xBTnFCRGRxL0l3S1FxYjlLYXNORU1GS1pDamozWXJSV2V4UUFaSzAwZnl3eTRyWmNwNEYrCjF0c0NxTGoxLzk5bzBzY1BXZmlRTkpOMlZ6TWpPcDFoRG1lK2U4NklCaDg1RCtvRjZSVjcwZ3NKamhWSzVTa28KTnJNQStXRG5KR1cxd0N0anpLRUFWc2l1c1RzZ096RXNUYjByTGQ1dFhHZkIwNXByN3lqTTVSRDZpTWo3R2ROSgphSVZjUnZsaU9BeExjd09PLzhZUVFuWHdhYTFVbnBEamg3bW1mWjNNTXN5M1ViK2tEWnV5OTV2TzAwL3hoUFpwCmxLeTNZZno2bGJTb1ZVNUlnUjFuRjIzTU9mTE93ODlwa3NxVnVFUGowU2tyZ0VFdzRrd3N4SGhkNGNHcXRQQ0IKRjk2Z25NSTFEMkxNZXRBRzMvVXZLVGtRTkRJR2tMUFZzVWUxdm5rMjVHWXV3TUpVUklpSHhreDJrd3V0S3M5YgphQU1vVG5ncHlFeWtBbXVMaFlUc09hTnBCZjFKYzFrWDVKN1FFUUdRTEtCZEF6TS8wTnhrSDZvPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFKSTZGdkIwREJpUU1BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNVGd4TURBd01qWmFGdzB6TmpBeE1UWXhNREF3TWpaYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBS3hZWXAydWtJWE00WVQ3bEZIZi9HWndXZEk4NXRuSklCZnkyRFA2T01uUU1vOUlrc1gyCjBxQWU0RzVheGlZc2tyQWM1OTZLQXB3RHJKcHc4Q3pTMmhQcTFQaVhPL01VVDNZZXFyTURpaXN4Y2dqTlBONHcKN3NIQzNJL2FkRWM4eTRNcUVnYWdqeDJNQ2dBb2NrYkpsMmxXbU8wRW5KTm5ITTFwUHVGL0MyU3B6WXllczR2dgpIS3lMUEh3V2tpUFlwVGFsdkdsNjlGM0VwMEtKQitsNHVYVHY1OVhlZEVQQllxN1ZpTXJOVjJ1TTVoL2FlaWNYCndGc2drc0VBbitGL0x1ekNsb0wwNjJMTGNLeFBGcjVVTW8yRXRvNlI2WWxwNzdSR20xbHB5dDFYazJHczhROXcKcW9aTGVGNTR0aVN2MFY0YThjeko0VUdYaVF2Vk5Ea0N2c1F4VklyNmZFc1JIT1E1amU1UXdOeitaZXRFbVZ6Swp0NWVYVTNZUFBHVzVDNExSdkZVRCtUTCtML2VJVi9PcGhkVnZHUTZHRHU5RTFteUV6czJ4djZTMEJERE9rRkpSCkszbVorTGxBMER3b1RWL0VSR0p6cXY1K2hXOVZ4eHM3OHQ3N2JNTnZSQjNrN0djeVY5eE8vK25oQ3djeElVNGEKQitLZmRTRk9CYUhVaHhkMzhJQ2hYdHBTK3RVbGFMN2RjV2hlbmhLVzI4MXhsSzJqQzd1dm5XNmF4N0ZuUmlmWQpqL3EzLzNiUkRjM2dqZnFpT3RoY2pZRSs2aW5PbEZDUmVSclZRcStnY2ZjZkxvL1BWd2NTM2ZhdjNOdFMyNmltCnhrdW8vYzROc3RoSnc0Zm5UZVdmaUF0R08rdElUek9OUks5VnAwZlM1UkRuczIwU1k2aXRLWFVIQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlNWNjZQeDdUcUhyNVFvdUZ2SmhGekEvZVZDbHpBZkJnTlZIU01FR0RBV2dCU1Y2NlB4N1RxSHI1UW91RnZKCmhGekEvZVZDbHpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQWwzdnZCeGdGZkU2azcxMHpoWm9SMVBwT2Q1Yk0KRVE1b0RYcnlHUjUzMVp6V1BsbHBZYXlNQXAxSzNVYlVucURaajhaTWpIOVZtL29rbUl3SFQxUVJkemp4UXpMSQpDaitUN0hLeFZJM1J1ZGpkMUU4NTNwTW1rY2M1a1lBMUZtdzVpVUlNaE1Ub1VvdEVveStGYTRuclBnMW9OaXBoCmdPQ2xURXJ5enNkTGhnNXFNR3dNdlRXdTBLMVlIZ2EydzEzVG81eG5MUENiVHUwbHFTRTBtc2hSYUc5U2xFelcKZEJDcXpRRUlab1Z0NGhrUkcwancxbEtYbUVSNWlMejJSSUt6clFwWG0vSXJMeWc0T3R0cy8wY0UramxScFdhKwpmMlBNREZWemd5akd0Z25CeFFkMml5RmRIbEd0SUJqZExtR3dHeUgvOEIzS0lKeDRzNSs5M3NXMFFjSE9OVEM1Cm9IbzRYcERkSlk0Vnd3YlBabEpqdE5jS1RCWjZXY3lXenJQNnVLQmN2YUY1T241MnpQdVNGaVdvZlNSNGhLcFkKMEM5eC9lWkRIYWdUQkhaYTlrMmF3U2Z1RDRmWnh0MkdUMGNpdzZLNUJHNmVZYkJCWm9ZN0xObHFIUnN5SEVZcAp0aWVtTHovUHFaVTJKcXR6UVZFVmlpVE1yam02dEFIQ2RFQjBYbFE4N0xsY0ZNLzlBakRQa2RlSCtUNlpubTBvCjJYaE9PVnFucXZjQTBJMUNtSzJvWVFLdzJkV2hLajE4dmUraVF2TFdGSlptTWlkeGhaNDdiY3dmOEZBc21YVmQKK01QSCtzNDA3UlVSb29rNzN5Ty90TjRCM1llTzFBUkRkdndReTRyQ0RYcW1WMXhqaVFhZ2R5bkw1Q1QreE5lOApOUXIyK0EyL0JmS3NhUXM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
