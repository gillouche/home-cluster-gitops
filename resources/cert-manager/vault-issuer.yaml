apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVV0VrTWFDTEkxWVJuMHJJaXVNVGZrZklHVWp3d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFNApNVGt5TWpBMVdoY05NekV3TVRFM01Ua3lNak13V2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFESXVNcWdFVUx2Y1QrVWhzOGhPWkdzeTNnRkFUazdBR1JZMm9oZ3Y5bGZVMUVSbzEvawpGZ2dPV3FoUHVqMk1vd21uQ1RNbjgyQkRxdUlzRU1ZTW5KQ2hIN1hwZXZGK0NHdG41SEN3dU9jUGFHZHhDbDJ4Cm9LOWp2SjhTU3kraDlUVjZPeldBT1pyUUxZRjJxdnFlVkVzTUltdGxIQVR3TEVhRFpUUnNlOVExVG5VNGlhN1oKeHlNRHZHWVA1STBVdFFxc0R4TzBLWmpxUktReEZoalRBMGsyc3V3M0FIN3VqS0JFYjJZZ3BmbnQ0L2JpYzZRUgo2VUtUVWhtWFU1ZUIvSjlkalBrTzBrSjVNcVNjZ1hTRmgzSGx5YjFwUXF0ei9qYU5aVHlKVWZ2aUxKYjJESnNyCnJsa3QyOHJtditDSTJrZkowWnZsdmRFNDdYd2w1U0M3bDNXakFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkI4ZEdhRFVLejJpbGFhYQpKcXZEZDg3NGZ0WGdNQjhHQTFVZEl3UVlNQmFBRkZhWmgzdHlZbndyWGpBdzRqWE04NzI2QU5hQU1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQUJEKzBUemJQCjlZMWRhayt2VUNMQzB5QWZXMlBNUnZhTWFtNzBsWkZUeVRXZUdDSm5xQnVIRW90TnlIZW9VS1ZNTnB4ekpTaHoKZU52SlI2MWF3VUdEbnEzZnhYK0I3UEdueCt6RDIyRTlIZDl2eUN1aHJJTDVMbXJIanhSOERQY1BwQjRWbXE2aQpFdDR6N3ZnUWtWYTVRaFB6VXhoaE84c2hXWDVTWXdBYVRoUmNIZ2NsTHVZUUQrUG1NcjVQVkUva083c2krbisxCnY5SG5STkJuek9DZFc3RXRjQkVBVDltUDJQVjdVMStuOE9ja2xGampHR2lnb0tmYWNXOWZVYmNORFJESC9GdUsKTmVMaEZoa2hLR0lzb0J1MHlQUWJyZVI5MGhjYXd5TXhxYjArY21UYVZpd21NUHNkaHpFU2xrcDdUeExXMFR1OQpTTThsU3E1WUhyK1FqQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVYUJqdGVva1Q1WEJwVmxVb1J4SVEya01RMXg4d0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXhPREU0TWpJek1Gb1hEVE14TURFeE56RTVNakl6TUZvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRQ3JEU3cyRlFhNlVFUGJEeGpSeEwzK3pMeFBrZGFhM0tLQzJEbFNuamswVjE5MVBQN0VqcDJ5Ci9jNWtMLzVjam1lVFFxTEV1bnlJQ2QxT2g4dGIxcllyZU9La1ZOZVI1VXZ3Zm5GWWdGTlU3VDdpdnVDd1R6VEoKV0h5NTYyRGVuN0tLdG83aUd4MExhY3JwQTlIS3l0ZStCcndsNlRmcDArYzFYbDlqNDVleHV0b3dqRWlURDlEKwp6YjYrbUxSVDVkUEtNVFhvK2tKNWFEbU5mYlZBQnNaRkVkalhLeVRXM3RGczU0c3VpbWJReERhT1FFMUxDWDRBCldZVGQvOTIxWDN1a01GWVQ5OXptSjc1cGlmZFFwbDQzNGpPZEZpTWpNUlAyNklORkhXbmFDZm42TFZZb1Y5Nm4KQk5hMjBzNlJsUUJOL0gwNWhkQ2VtNEtZRUIzRElWSnhBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJSV21ZZDdjbUo4SzE0d01PSTF6UE85CnVnRFdnREFmQmdOVkhTTUVHREFXZ0JTVjY2UHg3VHFIcjVRb3VGdkpoRnpBL2VWQ2x6QU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBSmk5bmpxVC9UcjFoaStqb0ljUFp0QnpPeDUzR0VVNzVSVmZZSytYU0hUeHpTelZHenlLWgphSlN4T0p2ZnZMMEVrdEU4VFNqcjNWTGd1RVdKYjFhTXlVOHdMaFk1MnlIMlNydUdrYkZZUXdLNXdNTEZxZHF3CjdEY1JyMzlUelExcE1DV0FSZGNhdVU0bFlLNFFMTXQ4YnBEaVFQRmorR3MyMnhCTGl6N0l6TUludW14SHEwU08KaUVWUzR6UnBjN2ZVSE9MQUtmeUUxaExVMjZiY2hyWTlhcWV2Ui9RZ0xQSk5kMEE3a2x1Y1BqY0QzWEhjOEZXdgpGS1UxaTlVVGE2b3lxRUxPSm1HSXhabjZaL0kwd3hqS1FXaW91amYrUENibGV5YkVveDNUOUhpOUMyYmlaVGJxCjMxZ1VWckRHUmgraWoycUFQbyswMFBHMVFkNmY5blB0bHdYVTE3VGNvL2Z0c2RoOGpwUDk0M2pwM1pneHR0cDcKL3Y3YnVJYm9rZzJIZzQ2NDhUOXZWRHVBN052blNZeU5JMVZxM1EwNzRKcWFWOTZzS0FOeWMxUHlFamtCM1pydApLZnB4a1dtKzVWdXp4Z2tIQzFtczZ2emFGRTNrOU1GWHc3VFFLZUxEaENoQTByQ3BNc3lFbUJFRUFteWU1cHF0ClJWbVJWM1RLUXZaWGp3WnhHNmcwaDQ2Z0dCTGVWdzYxaVlOWGorTXVvbVJMTUNIK3JoSkJ6NEhtMnJjN3htR20KbU9FRmtFcUlCRVJGaVVDYXVPR2NXZFNtdEVPT3pKRDJMVG9MaHp3WWM0VnpEQi9LZEdLTE1jZ0d6WXVLcDJBWgpYM3djRGdHd3pQa0hSTENNTzZFSnQ5aDRGZHNiMytKdmVwR2luanRtWjNGRDMwaW1qaGFRWE5rPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFKSTZGdkIwREJpUU1BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNVGd4TURBd01qWmFGdzB6TmpBeE1UWXhNREF3TWpaYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBS3hZWXAydWtJWE00WVQ3bEZIZi9HWndXZEk4NXRuSklCZnkyRFA2T01uUU1vOUlrc1gyCjBxQWU0RzVheGlZc2tyQWM1OTZLQXB3RHJKcHc4Q3pTMmhQcTFQaVhPL01VVDNZZXFyTURpaXN4Y2dqTlBONHcKN3NIQzNJL2FkRWM4eTRNcUVnYWdqeDJNQ2dBb2NrYkpsMmxXbU8wRW5KTm5ITTFwUHVGL0MyU3B6WXllczR2dgpIS3lMUEh3V2tpUFlwVGFsdkdsNjlGM0VwMEtKQitsNHVYVHY1OVhlZEVQQllxN1ZpTXJOVjJ1TTVoL2FlaWNYCndGc2drc0VBbitGL0x1ekNsb0wwNjJMTGNLeFBGcjVVTW8yRXRvNlI2WWxwNzdSR20xbHB5dDFYazJHczhROXcKcW9aTGVGNTR0aVN2MFY0YThjeko0VUdYaVF2Vk5Ea0N2c1F4VklyNmZFc1JIT1E1amU1UXdOeitaZXRFbVZ6Swp0NWVYVTNZUFBHVzVDNExSdkZVRCtUTCtML2VJVi9PcGhkVnZHUTZHRHU5RTFteUV6czJ4djZTMEJERE9rRkpSCkszbVorTGxBMER3b1RWL0VSR0p6cXY1K2hXOVZ4eHM3OHQ3N2JNTnZSQjNrN0djeVY5eE8vK25oQ3djeElVNGEKQitLZmRTRk9CYUhVaHhkMzhJQ2hYdHBTK3RVbGFMN2RjV2hlbmhLVzI4MXhsSzJqQzd1dm5XNmF4N0ZuUmlmWQpqL3EzLzNiUkRjM2dqZnFpT3RoY2pZRSs2aW5PbEZDUmVSclZRcStnY2ZjZkxvL1BWd2NTM2ZhdjNOdFMyNmltCnhrdW8vYzROc3RoSnc0Zm5UZVdmaUF0R08rdElUek9OUks5VnAwZlM1UkRuczIwU1k2aXRLWFVIQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlNWNjZQeDdUcUhyNVFvdUZ2SmhGekEvZVZDbHpBZkJnTlZIU01FR0RBV2dCU1Y2NlB4N1RxSHI1UW91RnZKCmhGekEvZVZDbHpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQWwzdnZCeGdGZkU2azcxMHpoWm9SMVBwT2Q1Yk0KRVE1b0RYcnlHUjUzMVp6V1BsbHBZYXlNQXAxSzNVYlVucURaajhaTWpIOVZtL29rbUl3SFQxUVJkemp4UXpMSQpDaitUN0hLeFZJM1J1ZGpkMUU4NTNwTW1rY2M1a1lBMUZtdzVpVUlNaE1Ub1VvdEVveStGYTRuclBnMW9OaXBoCmdPQ2xURXJ5enNkTGhnNXFNR3dNdlRXdTBLMVlIZ2EydzEzVG81eG5MUENiVHUwbHFTRTBtc2hSYUc5U2xFelcKZEJDcXpRRUlab1Z0NGhrUkcwancxbEtYbUVSNWlMejJSSUt6clFwWG0vSXJMeWc0T3R0cy8wY0UramxScFdhKwpmMlBNREZWemd5akd0Z25CeFFkMml5RmRIbEd0SUJqZExtR3dHeUgvOEIzS0lKeDRzNSs5M3NXMFFjSE9OVEM1Cm9IbzRYcERkSlk0Vnd3YlBabEpqdE5jS1RCWjZXY3lXenJQNnVLQmN2YUY1T241MnpQdVNGaVdvZlNSNGhLcFkKMEM5eC9lWkRIYWdUQkhaYTlrMmF3U2Z1RDRmWnh0MkdUMGNpdzZLNUJHNmVZYkJCWm9ZN0xObHFIUnN5SEVZcAp0aWVtTHovUHFaVTJKcXR6UVZFVmlpVE1yam02dEFIQ2RFQjBYbFE4N0xsY0ZNLzlBakRQa2RlSCtUNlpubTBvCjJYaE9PVnFucXZjQTBJMUNtSzJvWVFLdzJkV2hLajE4dmUraVF2TFdGSlptTWlkeGhaNDdiY3dmOEZBc21YVmQKK01QSCtzNDA3UlVSb29rNzN5Ty90TjRCM1llTzFBUkRkdndReTRyQ0RYcW1WMXhqaVFhZ2R5bkw1Q1QreE5lOApOUXIyK0EyL0JmS3NhUXM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
