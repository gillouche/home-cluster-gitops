apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVY3UzMGhUeEl6a2FiOHBKQjc1OEJYQjVQVktFd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFNApNVFkwTlRFeldoY05NekV3TVRFM01UWTBOVFF3V2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDdkZ0N3hSUGdpMWlTaEQxeElKdnd1NUYveDVCdmw5bFh5NHF4NXJDSjdQSGpYYmRPRQpkdHloMTZFcWNka1V4SU9odVZtZmczM29QdlMzUFZmbEZSYk1Zdk96US9ZRUtaZVBsbzR5RFBscUcvVFN6akpoCmg1dUsxc1BOeFZkK0NkY2h6eXU2S0ozd1ZaVTdCeWZQb1lZaXVqOTFyOVQrTGl2T2lsSGI0dUtReDVueHFkQ2cKWnorTUlJajBvWlBUbWEwWlVWUUY0S3lRejZoYXNoOVV4TUtTcnh2Ym5tSTRXNmwwcG83NzhxSFNKc0p5T29mbgp1N2FheTY1ZVhvenRhWUd4TjRDZHY2M0crWVlXWjdDWS9KV1gwUGZ6SW9oUkpOdDByMGI1N21qR0tnSENpOTI2CjRwQXBFNEFCV01KaFFPM3BJU0FKM2JyU0J2ZFZhcnJVeGlRbkFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRlBoYTBTN3pKMmN0M0FYZwo2ODdCWGFiK1h0Z0JNQjhHQTFVZEl3UVlNQmFBRkJtZVRIMzlnWVhhVVlQL1JteU4vb2cwZGtweE1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQVA2MS9KcnFuClNZSUZsa0M5eXZLNDRjZEh0bHRhcW5VcXFVT3FpdjB6RVorVHVKc3d4TElGMVRUNi9yWjhvZWc3MWRSaWFyQzUKdmx2V0ZPOWtHbFk3dDUrQWlVU1hDQkRhVFg4TG50MXMwYVlhNUR5bG9Zci9yMHBzeDdoT3VpWUFwbHhZdHUxNAp1aThNN2I0ZVppVmhrUlZsTXdmNGJsWHgwQURkUVJjVlZWZFZqRWFjd1pEbTBIaFArQ05JV1dYT05sbzlvSXJOCjYxR0RSUXYveEJVODlodTh1RXA5em1GcGVoZkZtTVV5VXovN2xFWURpV3pYQ0FoZHFFQXIvTWR6cUkwY3kwbTIKZHlsRTVROVNCM2JscmpxQ29vcmVqUk1tbmRWTVlCaDM4QXlRTDUwMCs1U2Q3cGdjODlReXArWFBZd0dDNHdWVwo5Q01YVmliWGdWRENKZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVRjhSK1RqU3VKd01BaWFVa0Fua3BEd0kweUdVd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXhPREUxTkRVME1Gb1hEVE14TURFeE56RTJORFUwTUZvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRREF1Sk1kSTJvZHJ4eEo0aVJwbXVTalVPdG5jZERsSkFKazdTSTVXc1VadExmb2tHeHVHaHE3CnJOMHJoVVkrelE4cmVFUzcrUU93elVPczllOGRPUU4zdDhvSElhV1RtRktMQ3JUVmNldUxQcWZpcitjc2lqVDUKTFRyV3Bid2EreUVoQkVnR3N3SW40NlE2Y3ZtQ1k1dWxoWjd1YkVFRlRaQ25ER0JjZU9aTXl6alF0eUNRejd1LwpONlVGeXgyaXczZkg3aGlWUjBqQVk2bEVjTWd2L0Z3dk5ieU9DWU03cFhVNi83cVpyL0I3WGIxRDVCRitVc0xRCm5BUThOaE9UTElJNjQ2QUgxbDdaU0dleVNmL3VyMUpLU0c2c2VCVUxyeGxBUmZ1K1NRUlpSdk5LT2NMdFp1SVIKdHVGQ0grZUlxYy81RkNaNzVFTXdQMG5nbzN0QzdaUHZBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJRWm5reDkvWUdGMmxHRC8wWnNqZjZJCk5IWktjVEFmQmdOVkhTTUVHREFXZ0JTVjY2UHg3VHFIcjVRb3VGdkpoRnpBL2VWQ2x6QU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBSDhteVhEV1owMmQwWndTUGpNNXg3aWc0SEl1WWNpOW56WXB5V0ZtLzlYbUJPZTdmN2ZieAp3SmVOQzhBU0FPd0ozajQ5Tk44RHdzUFA5TTdhcjFCd3k2V0h0S05UQURzUS9LSEVDK1l5OVVvSWgzWEwwS2dNClI4K3J2WTFrcXNvdFpvRktRTXEwZTNER3BjczFHNGVxZS9kZWVQaHNseHFxMDNyNG1TV0UxQ0Q0am9QaDR2SEMKZldMazFWNFR2bEVBMWRYeEw3ZTY1aGZJTjQ1Smw2S2k5VVNzYTM2MnJVdHY2YXFJOTVJbnZYWThJUlUwNHN4bgp6dXp0R3RuT3JYTUpiZUd2MjB6WkZ6Y005endHRmlhZCtCYllhTG1uYVlxZ0Y2RXhaWjRoSW16dmdaZ053dk1tCmVSYmVBYjVJSnZQM1Y4UGFPdElnS0o4Nk1XeDhLc0UzSCt3N28vLyt5N0dpMHNOTmZMTngvS25EeFd0RU43NjEKWFlXL3BDUmpQZWZSRXVhRWNtZGYrZE5SUU9KcGNuVnRORjhOMlhycW1DNmtJRmRrQVN0b1I1SDFZMmtpM1ppZApFanovdGlRTGFYUHYyZHRSbUZLZktOQjNkZ1NIdTlpazVUcmtFMUNLc1hiVlJxUXhlZzJ3L0ozRmNCa2tacFBEClB4V2hLaWtoMmF1N3RrTzM3bGZ2M0FNQTlTL1FmYjkzcUt0YUNxWnhLWXMvRnk2NElMcVUzN2hZdFhXY2c0RlEKL3hBNVB6K2pBUnhLWnpVczR4aUN2UC9MMVhzWEs1OHc2V2V1MHY0Q3BUQkV1dTM0aVNVZ01yOEpvS2l2ZEsvRApaUmxOd09nNi9SbVNRbzVhaEt1dDh3cDFsdm9uUFFpMlVyZkxqTndXQlNCa3lvUStHQ01HS05zPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFKSTZGdkIwREJpUU1BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNVGd4TURBd01qWmFGdzB6TmpBeE1UWXhNREF3TWpaYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBS3hZWXAydWtJWE00WVQ3bEZIZi9HWndXZEk4NXRuSklCZnkyRFA2T01uUU1vOUlrc1gyCjBxQWU0RzVheGlZc2tyQWM1OTZLQXB3RHJKcHc4Q3pTMmhQcTFQaVhPL01VVDNZZXFyTURpaXN4Y2dqTlBONHcKN3NIQzNJL2FkRWM4eTRNcUVnYWdqeDJNQ2dBb2NrYkpsMmxXbU8wRW5KTm5ITTFwUHVGL0MyU3B6WXllczR2dgpIS3lMUEh3V2tpUFlwVGFsdkdsNjlGM0VwMEtKQitsNHVYVHY1OVhlZEVQQllxN1ZpTXJOVjJ1TTVoL2FlaWNYCndGc2drc0VBbitGL0x1ekNsb0wwNjJMTGNLeFBGcjVVTW8yRXRvNlI2WWxwNzdSR20xbHB5dDFYazJHczhROXcKcW9aTGVGNTR0aVN2MFY0YThjeko0VUdYaVF2Vk5Ea0N2c1F4VklyNmZFc1JIT1E1amU1UXdOeitaZXRFbVZ6Swp0NWVYVTNZUFBHVzVDNExSdkZVRCtUTCtML2VJVi9PcGhkVnZHUTZHRHU5RTFteUV6czJ4djZTMEJERE9rRkpSCkszbVorTGxBMER3b1RWL0VSR0p6cXY1K2hXOVZ4eHM3OHQ3N2JNTnZSQjNrN0djeVY5eE8vK25oQ3djeElVNGEKQitLZmRTRk9CYUhVaHhkMzhJQ2hYdHBTK3RVbGFMN2RjV2hlbmhLVzI4MXhsSzJqQzd1dm5XNmF4N0ZuUmlmWQpqL3EzLzNiUkRjM2dqZnFpT3RoY2pZRSs2aW5PbEZDUmVSclZRcStnY2ZjZkxvL1BWd2NTM2ZhdjNOdFMyNmltCnhrdW8vYzROc3RoSnc0Zm5UZVdmaUF0R08rdElUek9OUks5VnAwZlM1UkRuczIwU1k2aXRLWFVIQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlNWNjZQeDdUcUhyNVFvdUZ2SmhGekEvZVZDbHpBZkJnTlZIU01FR0RBV2dCU1Y2NlB4N1RxSHI1UW91RnZKCmhGekEvZVZDbHpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQWwzdnZCeGdGZkU2azcxMHpoWm9SMVBwT2Q1Yk0KRVE1b0RYcnlHUjUzMVp6V1BsbHBZYXlNQXAxSzNVYlVucURaajhaTWpIOVZtL29rbUl3SFQxUVJkemp4UXpMSQpDaitUN0hLeFZJM1J1ZGpkMUU4NTNwTW1rY2M1a1lBMUZtdzVpVUlNaE1Ub1VvdEVveStGYTRuclBnMW9OaXBoCmdPQ2xURXJ5enNkTGhnNXFNR3dNdlRXdTBLMVlIZ2EydzEzVG81eG5MUENiVHUwbHFTRTBtc2hSYUc5U2xFelcKZEJDcXpRRUlab1Z0NGhrUkcwancxbEtYbUVSNWlMejJSSUt6clFwWG0vSXJMeWc0T3R0cy8wY0UramxScFdhKwpmMlBNREZWemd5akd0Z25CeFFkMml5RmRIbEd0SUJqZExtR3dHeUgvOEIzS0lKeDRzNSs5M3NXMFFjSE9OVEM1Cm9IbzRYcERkSlk0Vnd3YlBabEpqdE5jS1RCWjZXY3lXenJQNnVLQmN2YUY1T241MnpQdVNGaVdvZlNSNGhLcFkKMEM5eC9lWkRIYWdUQkhaYTlrMmF3U2Z1RDRmWnh0MkdUMGNpdzZLNUJHNmVZYkJCWm9ZN0xObHFIUnN5SEVZcAp0aWVtTHovUHFaVTJKcXR6UVZFVmlpVE1yam02dEFIQ2RFQjBYbFE4N0xsY0ZNLzlBakRQa2RlSCtUNlpubTBvCjJYaE9PVnFucXZjQTBJMUNtSzJvWVFLdzJkV2hLajE4dmUraVF2TFdGSlptTWlkeGhaNDdiY3dmOEZBc21YVmQKK01QSCtzNDA3UlVSb29rNzN5Ty90TjRCM1llTzFBUkRkdndReTRyQ0RYcW1WMXhqaVFhZ2R5bkw1Q1QreE5lOApOUXIyK0EyL0JmS3NhUXM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
