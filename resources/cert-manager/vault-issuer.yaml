apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVRWxUYi9LZExBL3NVSUZPM2FJY29mQ0tuWlcwd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFNApNVEF3TXpFeFdoY05NekV3TVRFM01UQXdNek0zV2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDLzVxcjU0L3puM1RCT1VNWG5rYWRFYnR4dmJTSWJEaTFqbzlac0xHSXhOdjlFWFVzVgpGSHVKWlFvWWRRYk5pL3pKV2hZRndhWE0vZnh0SUtybElBTWVPbzBqTXdwYXlJUmNkZGNtb1k5SzgrdWhuWFI4ClV0a1pJV2Y4OGtSNjNSYytLWk9yQi9rOURTbmloREdFWG1MYWtwbkhDcnhEcFEvVVRERDJzSUVXbjRlODNFVEcKYkIyYWgwNW9tWjcyUzZ0Wnh5eU93V0lWNGVNQ0p4akJSelhBL1UwNkJONWwxZGFTT0NvTDVXT1JaRnFsM3JaVgp0SXJ1ZXgwREJCQ29RWDF5dW5IaGwycFFLUjVsd3laakxkTW1JM0xWNEJBbDRBbXBaL1BzTE1nZTFvN1hjSnoyCkxSL2VRb25vS2VuREorTFpyWHRNMnJUQktjV0JsMkoyMlowRkFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRk5yYUNUSDBrMXRJeFZYcgo0VVI0TVJIbXR4OU1NQjhHQTFVZEl3UVlNQmFBRkdyS3JMd3RCOGkrV3U5dHVGdWppNFdvbktMTE1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWhUMjVleVM5ClpJNmEyZmxqcmRTQ29UUFBoMTNRTzhMdVlYR2cxR2k5azMzQ2hNbkRCYXo1cDhkK2tCQ0tHQXNEamtVYlJSY3YKNkVZUU5PMTZsOHpRMnVNS0JSR1VWN0VpQzIrZGYyNUZMMCtkUExiUzltUEl5cndYdVlNazVCbG5JZzBKb0VvQQpDdXNqUzd3dXZYMURqVWJ5NEYzTk92ZmFqeTdXTFM2SE1JbUkxNm1JdlNwT1h0OE5mKzduUFlQZHJuSjZuN0NiCk0rN0hyam0rU0ZpamFLc0JDVE5MSGJTWXBWcjVSTTdFNE5WbXVPcTRtU2lwNnhrMUVPb2lPMVlCV3hGSmxTUkMKZWMyVWRmWmRhN3drODhQd0s2U3RlM1V4YWNrTFR2UTUzb3FxSHZpREdSeEFZVC94YzV4cWVnWk5iRDBhUjFoagpxTDJBT1l4TCtxdm9yZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVSWRROVFNQlJxZUpsdStMUytodVByMS9yNWNJd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXhPREE1TURNek4xb1hEVE14TURFeE56RXdNRE16TjFvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRREdiRHFYRFhtS0sycnZkS1ZHNWpCYXBzK3NIODN0Nmo1cEJjWjBackl1d1VMNEVYWXNtbFlXCkhONE5oVXNRa3FUdVU3Y0NZcXVDTGhWcHJ2b2dZQjZxZkFhaFh0OWJPMTlqcDVwWlIrUWFuYnVLN2x4Nko3Z0cKOUUyVGhBdTEwZVBteG4rTFBUZ3lYM1VBS3gzbTRBd3dFcnBrYTRRNXgwTjQyVUZsZlR5NmxEc2hDMWg0Z1FQVgp0NTN1VU84TEppNEtSMTJ5L1hsMXVjZmNQaEdScG15eGRmak9jQnM3VTVXYUJYVFI4Ly9Wb3VBYTdOZm1RZGwyClAzTEQxK21mZ3VMMS9NUTBoeTRFaEhJU0ZIdnJ2dm1hUURJOEtaN3pUUTU5b2d4NlJ4UVExZFFrczZkd0Y1a0oKNmthaXhac1NGYjdpQlh1UWh3cHNuelk0OVdVdjdRbWJBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJScXlxeThMUWZJdmxydmJiaGJvNHVGCnFKeWl5ekFmQmdOVkhTTUVHREFXZ0JTVjY2UHg3VHFIcjVRb3VGdkpoRnpBL2VWQ2x6QU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBT1VXK3lxYjAwMjc1dU1XMXMxL2JZTzdmbCtxTEpLYnFIeWNUUEFtb24rNndRZzRycEFxVgpvdTh4YldjelVYWm5oQzdCc0ppNFFUK2tlejBucEVRUWtHNnlSMUN3bnNaUGpjMFFwQlBhUVNwUFR1eU1rbDFDCnhRSHhIREpZYktvNWxHTmN1T2orV2VRY1YvTHVwU1B5SjJYZXBjRlpib1VjemFYclp3Q0hwNTNHWHJJL3RKeXYKZzVrVlFqVkhvM3N2T2xPZnB5RU81SWE0dnpJK29TNVhlMElmNE04bkRZMUZyTzVxQWZrMkNCZUFVOGI5eEtsSAplS3pGbzRVUzNnWGlCa2VUNVNMNVV0eXZGWHhxcG9kRmdQUkVDZW5kV3h4M1ZaWUtwWUtBNHBjRUdYaDhtUlBoCm51MU9OcFQzWmNjYUVJcEc5MWF6QlRxODBaUG5kN3RETmFHTjV3U2FTZC9GRHp3UjR3bjZPU1dicXZ0djRucksKdDVDUVNCNXdMTEwzSEZqVEVDbWNFZUpsdEhnQjgzazRZT1ZtMXBGRUdjQmJYeUlDTE50V3ZUNHMwUWdMOEsrSAp4VERkUnowYmQwVEVCZHUwR25wa2NBeTVnZ3E4OVdidjBHTmV4eFFPbHpkYVpDL0FRTk8vaFQwUFFMeXJVQXR6CmxKZXBDV3h6MEwyQTE2aS9QdHQwTFEyMWZGejVJSTZjWVpaejVmVmtuNHQyWktGNElIcjdmRUpmMzk5d1ZMVDYKVmowNVpvSHRKbHNWNTBUeHNkbzlBQWRiZmMwR2FOWjJmUDlUc0ZzcXdLVyttMVZxZGNDWVA3N3p4K1VYOFFMVwozUTVqMENzdEZXakVFMWh6YnhhUmlhY1RWRTUvbmF3NWQ5VG82aUZwRDY5U1RjOWhTcU9hdnNzPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFKSTZGdkIwREJpUU1BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNVGd4TURBd01qWmFGdzB6TmpBeE1UWXhNREF3TWpaYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBS3hZWXAydWtJWE00WVQ3bEZIZi9HWndXZEk4NXRuSklCZnkyRFA2T01uUU1vOUlrc1gyCjBxQWU0RzVheGlZc2tyQWM1OTZLQXB3RHJKcHc4Q3pTMmhQcTFQaVhPL01VVDNZZXFyTURpaXN4Y2dqTlBONHcKN3NIQzNJL2FkRWM4eTRNcUVnYWdqeDJNQ2dBb2NrYkpsMmxXbU8wRW5KTm5ITTFwUHVGL0MyU3B6WXllczR2dgpIS3lMUEh3V2tpUFlwVGFsdkdsNjlGM0VwMEtKQitsNHVYVHY1OVhlZEVQQllxN1ZpTXJOVjJ1TTVoL2FlaWNYCndGc2drc0VBbitGL0x1ekNsb0wwNjJMTGNLeFBGcjVVTW8yRXRvNlI2WWxwNzdSR20xbHB5dDFYazJHczhROXcKcW9aTGVGNTR0aVN2MFY0YThjeko0VUdYaVF2Vk5Ea0N2c1F4VklyNmZFc1JIT1E1amU1UXdOeitaZXRFbVZ6Swp0NWVYVTNZUFBHVzVDNExSdkZVRCtUTCtML2VJVi9PcGhkVnZHUTZHRHU5RTFteUV6czJ4djZTMEJERE9rRkpSCkszbVorTGxBMER3b1RWL0VSR0p6cXY1K2hXOVZ4eHM3OHQ3N2JNTnZSQjNrN0djeVY5eE8vK25oQ3djeElVNGEKQitLZmRTRk9CYUhVaHhkMzhJQ2hYdHBTK3RVbGFMN2RjV2hlbmhLVzI4MXhsSzJqQzd1dm5XNmF4N0ZuUmlmWQpqL3EzLzNiUkRjM2dqZnFpT3RoY2pZRSs2aW5PbEZDUmVSclZRcStnY2ZjZkxvL1BWd2NTM2ZhdjNOdFMyNmltCnhrdW8vYzROc3RoSnc0Zm5UZVdmaUF0R08rdElUek9OUks5VnAwZlM1UkRuczIwU1k2aXRLWFVIQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlNWNjZQeDdUcUhyNVFvdUZ2SmhGekEvZVZDbHpBZkJnTlZIU01FR0RBV2dCU1Y2NlB4N1RxSHI1UW91RnZKCmhGekEvZVZDbHpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQWwzdnZCeGdGZkU2azcxMHpoWm9SMVBwT2Q1Yk0KRVE1b0RYcnlHUjUzMVp6V1BsbHBZYXlNQXAxSzNVYlVucURaajhaTWpIOVZtL29rbUl3SFQxUVJkemp4UXpMSQpDaitUN0hLeFZJM1J1ZGpkMUU4NTNwTW1rY2M1a1lBMUZtdzVpVUlNaE1Ub1VvdEVveStGYTRuclBnMW9OaXBoCmdPQ2xURXJ5enNkTGhnNXFNR3dNdlRXdTBLMVlIZ2EydzEzVG81eG5MUENiVHUwbHFTRTBtc2hSYUc5U2xFelcKZEJDcXpRRUlab1Z0NGhrUkcwancxbEtYbUVSNWlMejJSSUt6clFwWG0vSXJMeWc0T3R0cy8wY0UramxScFdhKwpmMlBNREZWemd5akd0Z25CeFFkMml5RmRIbEd0SUJqZExtR3dHeUgvOEIzS0lKeDRzNSs5M3NXMFFjSE9OVEM1Cm9IbzRYcERkSlk0Vnd3YlBabEpqdE5jS1RCWjZXY3lXenJQNnVLQmN2YUY1T241MnpQdVNGaVdvZlNSNGhLcFkKMEM5eC9lWkRIYWdUQkhaYTlrMmF3U2Z1RDRmWnh0MkdUMGNpdzZLNUJHNmVZYkJCWm9ZN0xObHFIUnN5SEVZcAp0aWVtTHovUHFaVTJKcXR6UVZFVmlpVE1yam02dEFIQ2RFQjBYbFE4N0xsY0ZNLzlBakRQa2RlSCtUNlpubTBvCjJYaE9PVnFucXZjQTBJMUNtSzJvWVFLdzJkV2hLajE4dmUraVF2TFdGSlptTWlkeGhaNDdiY3dmOEZBc21YVmQKK01QSCtzNDA3UlVSb29rNzN5Ty90TjRCM1llTzFBUkRkdndReTRyQ0RYcW1WMXhqaVFhZ2R5bkw1Q1QreE5lOApOUXIyK0EyL0JmS3NhUXM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
