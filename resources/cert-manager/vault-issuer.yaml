apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZwekNDQTQrZ0F3SUJBZ0lKQUtXQlFuMnAyN3BrTUEwR0NTcUdTSWIzRFFFQkN3VUFNRjh4Q3pBSkJnTlYKQkFZVEFrSkZNUkV3RHdZRFZRUUlEQWhDY25WemMyVnNjekVSTUE4R0ExVUVCd3dJUW5KMWMzTmxiSE14RURBTwpCZ05WQkFvTUIwaHZiV1ZzWVdJeEdEQVdCZ05WQkFNTUQwaHZiV1ZzWVdJZ1VtOXZkQ0JEUVRBZUZ3MHlOakF4Ck1EZ3lNakkxTXpWYUZ3MHpOakF4TURZeU1qSTFNelZhTUY4eEN6QUpCZ05WQkFZVEFrSkZNUkV3RHdZRFZRUUkKREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU9CZ05WQkFvTUIwaHZiV1ZzWVdJeApHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQ0NBaUl3RFFZSktvWklodmNOQVFFQkJRQURnZ0lQCkFEQ0NBZ29DZ2dJQkFOdHJLa1NIaEZjWVgvUDgvRFNXc1NDcEVkMWFmdlpESEpXTVp0U3VaemRONnZKWDF2WnMKU21SZmR1ZU5oR2JtU0tRUWJOZHV5Q2duZU5sUjQwaHFnRVhGRFMzL1VCb1N0VUhTYlRPMkNNVlloUVBWTlo0bQpyNTJHOE52L0RMSENvd3RhMUlqaVNma250NFRPVVorTjh6V0F1TGdkNDhKM0J6M1RoTnB3TERhMVpuMmNmWXZFCjRRT0pubjBSaTl4ZFJtWEFWY0k2aGlHb2ErTXdhdkllYWRUSThRd0FLeGlGTUp1Q2JjdmM3SkF5cU5wYm5Va1oKekxza0tlcDdQVlhJczlQY1ZyRWdlNUF3d3NNWDJEUTkzUzBVQzNkOFVWQU5KbUp2ZU1Vek1iUGZETlYzWnFSUgpuOEtndkVtR3dZS2QwL2hQRlFiY2xqYTR5MXIzZjd5eC9DdzQ1T0RESmgzMXVGZDg2NmpjOHBPRFRJdS9zNU0zClNJazJQUkYvTHRRZHhiRUVOV3JCY0ZRWUFZcU1YWGpEOW51MTJkNXJpdU1YZ1pZZVdkMzVQb01DMUh3Smd2VnUKZWtWNVpaa1JUSnExeEhvbkhETjErTGlwRG1rUDFtOWt4ZlZManMyaHlRSUs4MlFtQmorNmxSOW50WDZvc0gxLwpEUHc4ZU1kWXRTanJXdTB1K0IzNEY5Z1JyZnpuL1Y0SFltcGxDUXdPb0syWWdHYVJ2LzgrMFQ3ZFdLTWNVaTFFCkxEZm41M3RPS3JNRE5yOUdwOXNuTmoxNURBdnRiYlNWRytMSTJ4R2d6QklOVkIwWVR3elVoTTMzSE9QUTN1RFgKVFZINFY5ajVWcUR3cEpZZ3l2WGpGSVArc292WUFTQ2xDMS95bUtRYnRSSFFrRlkzSU1rOWhkL0JBZ01CQUFHagpaakJrTUJJR0ExVWRFd0VCL3dRSU1BWUJBZjhDQVFJd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXCkJCUkU3TEE5dlNnVnpUZ1lDb2lTNFZqdTM1QmRZREFmQmdOVkhTTUVHREFXZ0JSRTdMQTl2U2dWelRnWUNvaVMKNFZqdTM1QmRZREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBZ0VBeUpUVTRkbEpDMkxncHpGQUgvSWt1TU9mUWFuRAo3cjFCZy9YVFZDVXJwWisxY0RaMStHekFwUmdDYVRLTHRORjdFa2dWcmV1ck1PY2xNb2lhN2Y4enBGWFlQMmFFCnloTXJYSkxucVB3Q2Y5OG85aFViNHdiVFVLT1R2d3lsZ2pudXBHTnF0MXBmOUFVYUVURUVDMkNURkE1bDNDbGkKSzY4U2taWk9LVW1PVVFsaFRnSzNoU3E4Ynd0V0dTdkRGNFNjR05zNEExcW45SEJrdXNkUkdENzIrN1dnejlqagpZem5vdTdZV3hFNjNVc0VMSmVsOHF2ZG83RWh0cEd1cU0wNzFCQ05zTjRuK1VYWWFXVGdob0RWTnZmd3pFd1cwCjZXdDlqQkFYdnY1REFkamRZTUU2UzAyQmJoeS9FZ3h3NVNBV1FlWldTTmxkeFdSdXhSSXRNTjArU1Y0NUo3OVUKaXN3a2RBMFBiTldYbFhjemZidDc0bS9KUC9TbkZmQXRhWXBGMDByUytkYjREZ0VIcGJjVW11cnNWZW9tOURoawppNmQ4c0dqQ1ppS2xVVC9ULzNJT1F5Lzg2bWpUM0pTVTlkK2Rhd3JLSTYzZzQxWnVjWHFXVFYwRjJNZnRDUkc3ClNHNGJiSU1CS05rUWJ2cDJuU2U3a3dqaG4ybE40K1diVUdVVFR2NTYvb3U5TXhCMytqeDVIR3ZFT25VNC9uTFQKRHBEKzdLQ1RWakpVcjJCZTVYaFNXMnVtSzY3cWdTdnJxSURtc1FQQW1kN0ZhUytRWEFJMDZuTHVuRGUwZiswcgpaS1ByVGk5VzgvMFBhd1FKelowYnpzbkJITnRlTEZBS2UvdDloSGZSMnJmcTNscXN6dEkxNjVVNFRhZ1k5RG1LCkxSSVJVZ3Q3K0VYWThBMD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
