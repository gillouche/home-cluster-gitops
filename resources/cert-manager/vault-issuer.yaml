apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVTEcvelJTbnVBbUErMUhocmhRUXRkOFk3cHlVd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFNApNVEExTURFNFdoY05NekV3TVRFM01UQTFNRFEwV2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDdjFBNVhVS3U2cE9OOEYwYm9XMWJWNEowWEp0Rm1tOXVWRUp1MHVzSi9BNGZ5aFBYUApMZDlrUjhpb092NWtHTS9jTlBPdDBrK3FOVHlGYU4xclVJdnRESGkyQUQzSkd4QWFJcUM1SDVUYlNmdkprZTNRClF3VVNrV2tmbUYwbWJ2TlFvVE5GWXVvYzVEZzRwSk5oS1l5eFB1aFVLSTlaZFIxd0VneDY1VFVwclNYdXNOSEwKdHJ3dFZ0dmovSHd0WUZPc3hOSG8xbzRsUDQ5RHR5Vm5EbDBxVUpQdCtXYTJPcVNMYjdEenQzRmdad05iOWd3Swpqa05kVkJRbWYxWFlvMGxSb2NkZkVhVkl2aDhQekhMYmdxMnZCU2Q1RXIyTng0enUrRDBERTNNMXBiL2ZVaTBJCkVDTzUzMVk0VnFLRDJGbVcwaFBzemRuZkluNWdaTTArSTlEREFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRk4yZHdIRGdRb2xadnNlcwoxV3FOdE5Wdng4Yk1NQjhHQTFVZEl3UVlNQmFBRkxEU2xIM0VrcmtmYVowckhGcWtqcDUrdG04c01FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQXBBY2VWVVNsCnJSRm93Vi9zQVlTRnlUMXY2dThHd0lVb3NvdUpTSUFHblpReExiNEx6TWlWTUhkN3IxTkJOaWtrSU1hSzl6eVMKTElVa0ZZMmlWYUtHczY0UldhZUtObGRnWnNtakdMWmdqa1NERWlWYTloaVVqWWVDNFJaRFFVWDlBdFhUU2ZFVwpBS0pjdkU5M2ZmRml5OW1jeThqR1pVYTJ0ekJrakpxT3dIUjF5NDlYSUpSNWFUNERORG41TElETW80YWg0ZzVZCmpzL1lCSW13MU5VcTFJY0VyWXlUMjNRMGNLeTY5R0VpUzcrTHcxcVcwWk9HaURKM00ydGJRbWo1NmQ4N1hUbEgKa0l4UFg3TXhBckNtQnRMRGRvUkpKMHplcERZSC9GM3FtWnJsZndTQkxDZ2YyTEIzZEdXZmc3NW53b3o0bUNsMgpOaFYycHVlUXZ3MjFRUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVYmkreU80cXdLdFpoSm5zemc2QlhrZ0x4SlNnd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXhPREE1TlRBME5Gb1hEVE14TURFeE56RXdOVEEwTkZvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRQ3pRbjFHNXJIY1MrMjRXTmZUdGg3TVEvNk1tVEVHcktiK3E3S1FML3cra0FKZ3REc2Zpa0xlCitnb0ZVanBBcDlpZEdiMloxSmpGSE5BeXlyTGhMelBxYkZsTG1pMG1mWXpBZ3NVT1RwOHdXOE4vMXMwcnc0L3YKRmJ0cGdMVkdtajRZallFRUF3aFdMdTNSM3VxbnlRSjBZWWdEaGxjQ0xmQ1JFSTAyZGZGbG5CeTRzVWRISTlGbgo1aFpYbFhmNmY0aHpDSVRXU0w1MWh6S1J0Uk95VVVWK1VJTVdSNTF5SDlFZHRyRy9saFUxcVk1ZytwZEtvMzhXClFRN1BZWURZa1d2VkpnVCtIWUpDZmMwbmlhZjFMdGNXb3FyU3loU2xoaG1BcnlvWGNlUlRRYm5jOThGS3FKY3MKQW1lY05oNlZ4OGE0eFE0eERwWlhqWDc5b0lOb3V6UGpBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJTdzBwUjl4Sks1SDJtZEt4eGFwSTZlCmZyWnZMREFmQmdOVkhTTUVHREFXZ0JTVjY2UHg3VHFIcjVRb3VGdkpoRnpBL2VWQ2x6QU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBSGFBQnNNNGpldCtMQzgwNnMyQVk3TUl6WThHRlBaeUpSQ3hkR3hsTnhPM1RUdlJzcUVYUwpsSnVBQUV2UjBQL1VOTnFYNmpST2lGTnY4YlozaW9JN3pEaVA3Sm0rRFFHU1BnU3FPck8yV3JldTZ4eEJ4WGlHCmpaK2pvNTBOMDZFcVJnb3dOell1QWM1Zk1tNC9RTCt4UHZpSlpUNVRoUG9keWJSbHVKTUpiaWhUTGFUQncrTEYKdjZRZWhPNEd0V2tXZnZpRlI0UjVCOElpUGs5NDdKeUZkNytOMUFrVjJIUHl4SW5TMkJoK2QxSnArdzFubWt5aAprWTF0U3R3YVBHSTc2SWdIM3M4WXlmSEI1OU1aNmdrK3g3N0lDNFlidXFtTC84YWI3aW1TVTZNZzBOWkpObStDCjJGc0FTcDZmSGp3a2lPUVVTK3NFZ0x6aHpua3dFWlduU0x2RXprdWw5YndaeVVwc0U1MGlkcWZKWVJhS2IyQzEKanA3NUhOaE1HcE9lNTNJaXpsREpLR1NFVGFhUUp1YVNwa1NUY1ZFOFo2ZkF1aFRNbEVvOXNlOVZmK085WmVHNQpNRFUreU9WdEthOHBWeTQvTjdRSnVDQ3ZkNmR6R3ZOTytjQm9qUXBoVVpESHM3V2R4U0ozRjNZSVpTVGkxczRMCmpGRnJuRXFQK21OU1ZsdGwyMTJqbG15WFdCckFyeVR3bzlOaGhYalVvSmg3NTl0NGdQSjZQRmtKSlVDSHBsd1UKM09JRExTRVlyT05ZQUhVOWZMTmtxUjlNUzl4dHMwbGJ5NldITlZtUjNiYjFkU1NJb1FTcEM2VlpwYmtjbzlPVgpHSEZCcm5yajNLTmdPZFpvNG9yTmdCdVVjd2hCWkpGczdtcHhzdXp2L1RhR2E3T2xzcG8wU1RZPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFKSTZGdkIwREJpUU1BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNVGd4TURBd01qWmFGdzB6TmpBeE1UWXhNREF3TWpaYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBS3hZWXAydWtJWE00WVQ3bEZIZi9HWndXZEk4NXRuSklCZnkyRFA2T01uUU1vOUlrc1gyCjBxQWU0RzVheGlZc2tyQWM1OTZLQXB3RHJKcHc4Q3pTMmhQcTFQaVhPL01VVDNZZXFyTURpaXN4Y2dqTlBONHcKN3NIQzNJL2FkRWM4eTRNcUVnYWdqeDJNQ2dBb2NrYkpsMmxXbU8wRW5KTm5ITTFwUHVGL0MyU3B6WXllczR2dgpIS3lMUEh3V2tpUFlwVGFsdkdsNjlGM0VwMEtKQitsNHVYVHY1OVhlZEVQQllxN1ZpTXJOVjJ1TTVoL2FlaWNYCndGc2drc0VBbitGL0x1ekNsb0wwNjJMTGNLeFBGcjVVTW8yRXRvNlI2WWxwNzdSR20xbHB5dDFYazJHczhROXcKcW9aTGVGNTR0aVN2MFY0YThjeko0VUdYaVF2Vk5Ea0N2c1F4VklyNmZFc1JIT1E1amU1UXdOeitaZXRFbVZ6Swp0NWVYVTNZUFBHVzVDNExSdkZVRCtUTCtML2VJVi9PcGhkVnZHUTZHRHU5RTFteUV6czJ4djZTMEJERE9rRkpSCkszbVorTGxBMER3b1RWL0VSR0p6cXY1K2hXOVZ4eHM3OHQ3N2JNTnZSQjNrN0djeVY5eE8vK25oQ3djeElVNGEKQitLZmRTRk9CYUhVaHhkMzhJQ2hYdHBTK3RVbGFMN2RjV2hlbmhLVzI4MXhsSzJqQzd1dm5XNmF4N0ZuUmlmWQpqL3EzLzNiUkRjM2dqZnFpT3RoY2pZRSs2aW5PbEZDUmVSclZRcStnY2ZjZkxvL1BWd2NTM2ZhdjNOdFMyNmltCnhrdW8vYzROc3RoSnc0Zm5UZVdmaUF0R08rdElUek9OUks5VnAwZlM1UkRuczIwU1k2aXRLWFVIQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlNWNjZQeDdUcUhyNVFvdUZ2SmhGekEvZVZDbHpBZkJnTlZIU01FR0RBV2dCU1Y2NlB4N1RxSHI1UW91RnZKCmhGekEvZVZDbHpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQWwzdnZCeGdGZkU2azcxMHpoWm9SMVBwT2Q1Yk0KRVE1b0RYcnlHUjUzMVp6V1BsbHBZYXlNQXAxSzNVYlVucURaajhaTWpIOVZtL29rbUl3SFQxUVJkemp4UXpMSQpDaitUN0hLeFZJM1J1ZGpkMUU4NTNwTW1rY2M1a1lBMUZtdzVpVUlNaE1Ub1VvdEVveStGYTRuclBnMW9OaXBoCmdPQ2xURXJ5enNkTGhnNXFNR3dNdlRXdTBLMVlIZ2EydzEzVG81eG5MUENiVHUwbHFTRTBtc2hSYUc5U2xFelcKZEJDcXpRRUlab1Z0NGhrUkcwancxbEtYbUVSNWlMejJSSUt6clFwWG0vSXJMeWc0T3R0cy8wY0UramxScFdhKwpmMlBNREZWemd5akd0Z25CeFFkMml5RmRIbEd0SUJqZExtR3dHeUgvOEIzS0lKeDRzNSs5M3NXMFFjSE9OVEM1Cm9IbzRYcERkSlk0Vnd3YlBabEpqdE5jS1RCWjZXY3lXenJQNnVLQmN2YUY1T241MnpQdVNGaVdvZlNSNGhLcFkKMEM5eC9lWkRIYWdUQkhaYTlrMmF3U2Z1RDRmWnh0MkdUMGNpdzZLNUJHNmVZYkJCWm9ZN0xObHFIUnN5SEVZcAp0aWVtTHovUHFaVTJKcXR6UVZFVmlpVE1yam02dEFIQ2RFQjBYbFE4N0xsY0ZNLzlBakRQa2RlSCtUNlpubTBvCjJYaE9PVnFucXZjQTBJMUNtSzJvWVFLdzJkV2hLajE4dmUraVF2TFdGSlptTWlkeGhaNDdiY3dmOEZBc21YVmQKK01QSCtzNDA3UlVSb29rNzN5Ty90TjRCM1llTzFBUkRkdndReTRyQ0RYcW1WMXhqaVFhZ2R5bkw1Q1QreE5lOApOUXIyK0EyL0JmS3NhUXM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
