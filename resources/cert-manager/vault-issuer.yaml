apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVSDkydVlBWmhnaWtlMlR2ckNyZDVla3BQWkNVd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRBeQpNVEUwTWpVd1doY05NekV3TVRBeE1URTBNekV4V2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFEb29HRlVValVZbHhHa0F2TDQyZXFEek1BZUR3bFpJRFpCWWRaRHlKdE5qMSt4dTN5ZApIdWExRE4wWHAvTHNpbDNYN1AzOGNRbUtmSHFRSE10LzdPOWlVWUJBYWFqMmlpaEFoTDQvOGN0Z2pvSWlJbzNBCmZxWDN0SjRwejg2V3JnWjJvY1MyMzJua1E2QkpQVzJ3QWFaNW10czExZFFRd0ROMm4xWVBmMkZBa3kzenBJTkIKSDFTSi9FeWtQUTVib2h1bVduekx5ZzYzOUpkY3g3dW1EUkI0dnZJUG9Gd1NYSldIN1Vza3k5UHR2dElPMzdqZAowU094ZVlxWU1SRElwV2tUZERMcXlWQ2NGTTBMVDR4UGV2eTZtQ3Y5K3ZiQTBiOHJSUk1Ec1pWK2RnWlZIOUdHCkJuSzNTRTlpUVBtakVBZWZuekhkMEZ6TDZWY2xaMmk3ekx5SkFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRk10UHMyalB2M0tEM1BOYgoxSWtXN1NJTmJVUnpNQjhHQTFVZEl3UVlNQmFBRkxuL2RicW51c0RkVGlEWHZ0TU5SU1MrZU80NE1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQVlkQllGdFB1ClhVUXlsd2dobm5NRnI1eWkyWjd6b2d4Rnlvdm93alRNWTV0R0RZQm1vTWhSM1ZTNUJUSUhLbFpSZjdjR3p5dEQKT3FNYzAwdloyRzRwaVRMNlc5L1U2SlB1RzlCUXYwaDd5UmhNbVpNZmViU0dmTUJlMTY5QjlVeXdYWkNJYU0rMgp6cDU1SHJocmZIdWpRY2QxcWUwVEk4aGl3K3ZFQmxSYW1GL0U4Wmx0bkk4aDVXeFFmaFJ6aHMzQVJEdjRwNG5wCkRvbng2a2RjRWFqSTZDNGhnRjlnSGhXNXBNNmUybDFZTCtoMWx0Ym9nQ2ZWTEZQZ1dkMExHeXI1S0p2Q3Fjb3EKTVNLQkxjT1F4enZ3VWxZdksyZnVlaVdsQk01SjhFTWlWS29jQi95YVhqZHNSZTViT29td0xXellickV1QzVNWApmeVJFTXpkeHhodkQ2dz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVUHdKUGhVZ2pLdlBabk9IeEg0bEFBWnF2SkVJd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXdNakV3TkRNeE1Wb1hEVE14TURFd01URXhORE14TVZvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRQ3ZQVEprSGRySllXVVdSaS8xTWQ1RFJPRmcrdmdBZW5BQzlQQ3hpL2NmT3FNUlF5NTJNYTZ0ClRoUVVMU21JT1pCMGVxOWhvNk9IODJUZnRPRFJkLzhSTVZnWG8xclNKM3F2NExqWnhTcnBqS2pmczRhOTZkOEIKaUNKa215bEI0WnlzWnY2YW1qeGg2di9vSXlVOGxuTmlWejlqTVVuaDRRMnJwUmU2WEt2cU5QWXh4a3d2Q2U1Wgo1S29mblJxL094N044NWZyK3VreFNvTURwS09UMnZRNTFINUJYa0NkTWxBYUVBbzVFZm5qejd3MldKY1k4NnBECjR2SDF4cmY1VXA2M1EzTEtZd24xaVI2OGlWSlpDczdHSFNSR3VtUFI2RXErTEFDbVBweXgvVm5SbThFaFJEeG4KWGtqS0g0Y28vUCtsRDR6cjRIc3JEY1lSVDlRMXZ3RkhBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJTNS8zVzZwN3JBM1U0ZzE3N1REVVVrCnZuanVPREFmQmdOVkhTTUVHREFXZ0JTeUY0d2F5SUhMaTZURTFuMUhHVkZsakhGZ2lEQU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBZzRocmpQY0lrRUIyTDZ3MUdzT1N5YStNR000UnVTSDRmK1A4ZkplMVBESkd5eXg4OVVhVwpCWVA0cDJDelNRL0NrdmFoTERoY2RnMVlYalFZamhtYUxFU3lTWWpXeG81VUJNUStmVU15WFIyTUhaakhsK1NmCko2UlNyTzZrUzNMUW81SzRRTGxVVUorZUlNcnEyQnNIYVY0RGpObS8rbGFZMzFOZE1yUm5SdHFzMDRTaFp3cDEKdlpVejl6azNORFVYU1ZyUEVVaWdZdDdwUDlTRU9lUGp6UHVRSk5uN3dva1hSRUhZbStKSVBRektUcU9iRGpYZQphMXlaaDAyOGJhbTQyL3I2VGN1bUpKOUhadks4dDUxM3UzUFVETzRzdk93bkNHMTJySHJ2VnZVRWZrdWtvUFZzClI0czd0VU8wRVlkeVZzOCtjUk5nU2N1RGg1SW4za2dHN09KOUZMT05PZ2dQaG5Eb2prLzlYOWRCNGRZbDE3T1YKV0l5OGxzc0xiRUhJOGtoQ05HSjZLU0hjOHVNeEdoQlI5OUJiYTE3RVlQREVDYXBpR3ArdWp5dHVTeE1QU1AreApUQWN2RHg3Y3hobFdMcC9OVGZITnpkcVVrak1pazE3b3hlaHpvN1c3N1F3Wm5qaGtNd0tlMm8yM0hYK0ZBODhnCkxSeU12VHNuWjBFelVZQlR5NmM0b2lpSGhPb1dVcmVjMjV2dzVoaDM0Z1NNQm9wOW43RnkxQjhiOHM2dnJTK1IKQTZIeEQvQVM3a0JlbEk5ZExBaG9JMHVhekxWQSt2S21Ib29Lbmtnck9PV1NKbVNFRzMxMnh5RHhITEpmR0FLQwpFV1FmekN2UnBBdkdxUCtJcmxWc0Y1WXpWdHMxVHpaSzdnQmdmdnk2NEhVZ0tBUldjUmxKZFIwPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFNaXhHb1hIOEpNc01BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNREl4TVRReE16QmFGdzB6TlRFeU16RXhNVFF4TXpCYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBTVE0dE1IanpUUDRxb2lkYS9TbVZTNUc0dGNyTHBiK0hiNGc1RDJESXVDcWwzc0hqTWtFCk9Lc1dlVFY2Q3pDNzRENFlIbDZmUTFpdWQ0WjMzaFBhT2VzK3VadzBIQlptWVlFcmZPOVQvdTZSeXVXRVBucGUKZ3c4cmVKZG5MNnJqUVBjRnhOOVNHQWFIbzc3ZTRjb1UvbzVCOU1vaHhPL2pKc0tCQk1nU1I5c3lKYmNkakhmWgoxWFJzaVJ4WUZqRytUNWNLcGNOaWJSek5Cbjk0NmZLUWo2dlZTZ0R6SE4rL0dCaXBLZ0duWlo0eFhsSC9BUXlMCm1PK1ZtcXJMMHJ3aHVZcXVScURrM25FdzlIakdYNW43Q1ZFK0hTWGRYYjhoZndqM1pBaHluT3JiVGFpVVVOWkoKVFZTVVJwSFJBM0RQVEcvQm5FbXBXY3JPbWlnSW1qSm1EWEk1UWVwUURnZ0t0RnRyanRNVUM1am5vaCtYRS9pdwo4NFQwSVlta2JWMFNaZnZxR0VOM1A1VUYvUnI2MmEzU1RVU2FNa3YxVldFaExMa2xkSkVoaUZhNzgxRG5aUFVCClZZYnRHSGI4R0FoVkl3NHluZ1hETno1SjJKOFhKU1RJZ01udjNXdWtnbGVWM0h6aWNQRzdmWHJpQ2wxMUVXT0EKb1RnbEdJY2R0cEZNVmJnVXkrNWpZMERqRDdsYUwrUnJIZnU4OHNhZlNVcklYbzUybDVPWFNuR3lOM3RiV0N0awo3Nk1pVFJYdFQ0ZXhEZktDT3R1Sy9PeWorNDBhTUcrL1NkcEF6MFdvdkhJc1NKRFJOWXN6WWZUMUtpWks4WTdzCno4SS9jSmI3OVZJOVo2TlJkaFNnUllCVkR1YVJTYXBYSWZwTGZ5MlQzS2lzVkZoZWM1SDlkaHRkQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlN5RjR3YXlJSExpNlRFMW4xSEdWRmxqSEZnaURBZkJnTlZIU01FR0RBV2dCU3lGNHdheUlITGk2VEUxbjFICkdWRmxqSEZnaURBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQW0reHNDSmNiYjljL0dRRnhodnQ4NXpYTUEyTkoKVUZYTVorcXp4NFl2clhWbC9JNWF3U3FpYSswT3ZyYXV4b0dNb29OSTRleURKNk53dGlJMzdid29RN3VnZFJNTQpOWE8zazcvQWlRY1o2QmNaVld5MDQ0Z3l5SVVBNXpiZytHMk1NYTZFN1Z1T2ViUUlta3JJajYvSTAva3BYVElrCnpNTkRQeVVMeWt5VHdxcGVsaVVIV1RacDdlT0JKVmVtR3hjbGp0ZzJNYUNFQ0VFa1FEdTAxV0k0TmhSTWlZV1oKUjZNa3AyUFNJa0ZPb3p3VXZiM1FLZEhBQVlVaUkzb2MvMVI0b2JEVTMrdGNid1ljaDliZ2Y4czE4dWQrUlZYZgorR2Y4VmlVZ2ZQRGJrT0YvdXVsQUNkdllGVWtYTWVrWGxLVUN1eTFFNnphUUVwN1kzeTU4TnZ3Mkc4S2h4ak13CnZsdCtOUWFtSWRmWHNXTzYvYVVYKy84ZXorRnJ3Ukx6VitDZkhwVnJkQWpjRDFMSWdZK05zZ2grZ09xWi8zVG4KWmN0b2FpZnVSUjVMOU9NTkE4aFU1c1ZMTHRDV05sSjBqUTI0c0Jvd1JnR3J0a2kvaERabGJqNVVsM0lsVzF1dwpWajVNZkNCZ0dKek9DTllLOWpaM0hGZGpaQVUvMk9BM3lYd0pmR2t5VHd4amt3MC9PZ3VIK3ZHdDNxQ3k5b0h5ClNYL1IveFNTSzdZNDhQbCtoS09JUUZzLzZ0TERxY2xGNHIwbjJDUnVkVExacXBkdXJDcGQrMTI3cjNQNnJGVjgKdXZXVlcxaGlYcEpGZlJUZFFnSmg5VUtoYlAyeFBnWGlsM2VoWUlLdVRFQjJQMzZueXMvUmxNQzFtd0hkbEhtdgpTQlNEQzFvUnVGUUV6THc9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
