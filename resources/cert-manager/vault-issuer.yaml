apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVY1VVUW40OCtyY0xrbTcweUJvbjE4MmFQUnU4d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFMwpNakExTURJNVdoY05NekV3TVRFMk1qQTFNRFUxV2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFES29UN2RvTmV2UitjT1dzU3ZENTVLbEFiVXN0OGtFOG93WW1YRG5pWWxyM1p1WFRiUwo1SE5IN29DTzd3UHlOZW00bGFERzJ6RVlCMkpZNk9rTThBOVk1OHVhM2dFZ1BjYnppT3dTM2FITDhiOGhFaHM4CkphNGlINklvc0Vzem91c3ptY0pqTDdDT2IyUy9xY2w5aTJWc2lobzZyRzlhYkM3eHBVbUJkTDhUTjlzVjROVXMKOThlOGcwR01jTU12ZHBISEk4MERqcHg5Z3NuVjBHM011SEFnVko1NHVDRksyMWwxdHFZcVhUcE10RTBVVWllRgpNUDJOaVFiNlo1OVJqdTdBTUlvYlB5ZUJ5UVY5b2F2RmlEM0FuY3NGdjRNSjIxTDZTQ1JrWFZHRTM4dVYvSld5ClFmTktNZVl2UTVrdWlVODZ1bXBqcXZZeDdYOWVkSEUzYngrVEFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRk05WTFja1JsUEF5UVFuWgpJNEVSYnJSMDlBZEpNQjhHQTFVZEl3UVlNQmFBRkt4TmlIVUNtVDZCRjVxSTJ0VzArUXdlZ1orUU1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWpFYmVZam1TClJncmpwTTVyQyt0U3lXN0F4TmZvRk4yUDlVRlVQMjR5enNyQVArNmdaRUZ1UmNUaHBncE8vbitXbUh6VXpmWXMKUHFHMjFHMWV0RWZ5TzZpcHh2b3BuNkYwRWg5enF2a0lMeFIwcmJUSFU4czdlZDI3WXpqL3JUcGc1SHlNbzAvNQpZbitJQnFnZWVtKzlhSFRGQXA3NUJ3MUE0bUs4VWUvTXNnRFpRdmpTRkZKSHRVcDZuMFE5UTUrNTRBbTNha2F0ClZrQzN3QzFYNmpDVno4bjdNYTJQTVJ4NGpUbXVXeHl4SWxSSG1RY29Jb3ZJN0lWQ2pZVUNNK293WGdLWll1VnEKdVJkL0p2UGwyQWdZYWZxc3hWeUZWUUdsM2VLb3dpMGQxSnEzZ2xoWHpJNkFlRCtBRWUvNVIzRTBOMklHSlVkMApSVzV1bHVNMjlVbGZTQT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVkVENDQWwyZ0F3SUJBZ0lVQ3F5Wnp2RXo1ZEQ0dGlkTWluTmZNRlltNGVNd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1h6RUxNQWtHQTFVRUJoTUNRa1V4RVRBUEJnTlZCQWdNQ0VKeWRYTnpaV3h6TVJFd0R3WURWUVFIREFoQwpjblZ6YzJWc2N6RVFNQTRHQTFVRUNnd0hTRzl0Wld4aFlqRVlNQllHQTFVRUF3d1BTRzl0Wld4aFlpQlNiMjkwCklFTkJNQjRYRFRJMk1ERXhOekU1TlRBMU5Wb1hEVE14TURFeE5qSXdOVEExTlZvd0lqRWdNQjRHQTFVRUF4TVgKU0c5dFpXeGhZaUJKYm5SbGNtMWxaR2xoZEdVZ1EwRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBdwpnZ0VLQW9JQkFRRFNXek1Wc2E1cE5sZ2hiNVNXUjY1ZnduOGU1c09lQ09pb1BuU3lpaUs0VmN2SUZVb3B6Z3VZCi84TEVocldYbnJGYklteEhGV0FpNVdxaURKY2JJUzVrclgyenlZOHpGZC9Ga2hITDlIL2RXaHh5Nkw1QXU2cnMKNXJ4QUdtMDJ6L2g5dGY3T00vTnkrSjgxZEhGY0JrcUdHZ092WXJna0lIUmlmT1BGWDZWdGczYThaYWR5RlRmNgp6OWs3eEUxTERValpiRUM1cHNmZUtsV3M4cyt2bmtzN2JTN0xtUDV6NFB2aEpvMUtlZjM2VFVyTG5tRHhCUTV1CjZWVDNqUFhETGI1QUpGdFM3Y2luU1BmRXlzdGNKbUZSUjlWd1QxcXR3aDZMNWZsU3JwY2MrUGZ3VkJKdHVSNi8Kc3E4SVowZDJMdjBOamxsNHk5L0FOSFBCNWJCR3RnRFpBZ01CQUFHalpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQgpBZjhDQVFFd0RnWURWUjBQQVFIL0JBUURBZ0VHTUIwR0ExVWREZ1FXQkJTc1RZaDFBcGsrZ1JlYWlOclZ0UGtNCkhvR2ZrREFmQmdOVkhTTUVHREFXZ0JSaHVJaW1tMU9NblZxbDBwc3d1WjV3aUpCOENqQU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBZ0VBaHRYTmpIMnJQT2R0Yy9RR3JMVkg0ZHhjdlc3K2Y5MHV5Q3Jick00RGREQXo0UEoxd20zYgpVV2RiMVpLRU5Zc1paWGlxOEZlU1VlZkg2K0JUUHRhdmxxc204OTZsTm5uSVppblZvMW5zSHkvQmorVWR5a0RFCjN3Q1kySDRtVDVjdUlvUkRtZWlqUit2aTF4c1Iza21sUE11TlhsdTRBMUhqd2VubDVpQUtsUlF3dDh6dHZlRlQKcTB1WVlJemRITVNxcW9PbWNucEloVW1VeGV3QlN3Tk9CdFRzTzBBRHJNTHFVVENLeXdBbmozS2RzUE9CM0pLSAo1R0Z0OW02MHlSYWNlT0JtbElLNVhZbVRGZ0tIUzJEc1NxNFJ0c3g2SzJqbXRickE1b25BSWZTRyt2VkhGRzgxCnBBOEM4eE5ydkwvbGV5S3F2emZOZ003VzlTRnJHNVZPYXZvUnpJUHVEYWFDcVdFWUc4Ylo4aXI1WDZCVlF4WSsKUkp3SFVxSmM2MG5xWVVzeHJUOFhZU3lnU0gyQWw3TElTL05wNmt3TkZ3MHM4V0kxZC96d2RiZzhtaFEwMWFOeAp6MERXdjBlUi9GV1lvM1kvN3dCUVNMMHUxM0ZWd3ROYWtzN2t6Y1FyL0FqeDFEYkNOMkdJcXA0VkJnYm4vdy9XCjhMR2x3Tm1CbS9lemN1NGdTaldiVjNLUERaS01lNTc5eSthVi9JcTEzOG9BcTlDQVU4WlVMVHhiVnB5amc3RUkKRUhieS85UGNXVjhiakQ4Z3diT0t4QUtXbytVWVlrYnAzSUU5STl5Nk1FUHdLVklYNlQ0Zk1DRS9vUjBaQU1YZQpjYmRhODhPWlREUW56VnJ5aXYrenBxMEpMMjc2L0ZXVVZ3RDhUT1ZuUHFCZDNGK0thODZIYmprPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQpNSUlGcHpDQ0E0K2dBd0lCQWdJSkFQN281UFVsRWlPL01BMEdDU3FHU0liM0RRRUJDd1VBTUY4eEN6QUpCZ05WCkJBWVRBa0pGTVJFd0R3WURWUVFJREFoQ2NuVnpjMlZzY3pFUk1BOEdBMVVFQnd3SVFuSjFjM05sYkhNeEVEQU8KQmdOVkJBb01CMGh2YldWc1lXSXhHREFXQmdOVkJBTU1EMGh2YldWc1lXSWdVbTl2ZENCRFFUQWVGdzB5TmpBeApNVGN5TURNNE1UbGFGdzB6TmpBeE1UVXlNRE00TVRsYU1GOHhDekFKQmdOVkJBWVRBa0pGTVJFd0R3WURWUVFJCkRBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPQmdOVkJBb01CMGh2YldWc1lXSXgKR0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVENDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dJUApBRENDQWdvQ2dnSUJBSmRBSXZLNVdBYlduRnpqNjhzT1dUcTZEOXNzelVJdDBWa0N1MnpQRzRJV3hDSGVic0VTCnpZazdrazRWM0ZRV2ovdmREWmkxZDJxamowb29Ia0Z1ZHF5QmZJUXRxNWZRMnJIWFhEZVpqNU5jMFhaUklqSXUKb04vWVcyRW4yOXpYbEtQTDNFWjVQSXJVV2hxZlJ5cnJzNjBta2hha2JKZU1rNFNDZUV2MzZTU2tDNU5CYkRJMQpQZkFDbjB5dkYzS2dRZFJlaHF5d1RKUWZkd012bEJ6WFpWRWJWS3ZUbXM3WFlzMnd5SWFMcWJmT0Y4bytRNkt4ClJoc2Z1U3pQTzVDSmhXdmhINEttN2Y0MXhSakFjNitjWmNLd0lDYmJRWjIrVnFEMi9qanhiZ201clNmUmtnbk8Ka3cwTFJmSXQxelZYcHZoeWYxbVNrTkRuM3NoZ1ltYWNBRFZEcDhoUVRzQzl6S0RlSDEwZ3NIZUFkWDltdm80VQowNFBCQU1RS2tOSVpwY1VuTlQrWVNXUGJsa2ZIb1FZQXNUUlQzREloNnk5cElUa2JTa1c2UW5JZnF5MWNRd2Y0Cmo5MDRPTzB6V1ZnWHgxdzF4V29POVJEZExIdG1EQ2RKZTliU0E4QnJ5cFBxdlFyZndaVVV6MUxwVHdpRkptYTMKMllyYktIQlZVZFhGQVF1T1hQU05JWjU4dCtZZHNaaGFrc21uSDBFV3VzR0t5UkVHenNFU2FJbm8xN25YVCsyTAp5djFrVS9PdkMvODYzUHE0ZTNQaTgzRWlZdDBLVVhvaXFzYnpXYThCZFNWQzVia0lZaEJRSE1yTnBpd0JyWEY2CnkxZnhneUtzazRCLzBXOTJHQ05vNm9yTFQwRTE2NWdRVlRsenBpOWlWUGVtdlhTOVBVZ2dUSXgxQWdNQkFBR2oKWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRSXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01CMEdBMVVkRGdRVwpCQlJodUlpbW0xT01uVnFsMHBzd3VaNXdpSkI4Q2pBZkJnTlZIU01FR0RBV2dCUmh1SWltbTFPTW5WcWwwcHN3CnVaNXdpSkI4Q2pBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQUZNVlUwQk13MkhNNzljdi9rZVp5STNzS295UHMKQWdYeTBsUmVBOWhZTk50NEtuZ3hrT3huOVVJU3Y2bG1FL0NSMUpIa2J5R21DV2p1cjdFbEFKb24wOVpIZ0lPQgpzeDRtWlA2L1BKMzdyUmViSWswemwzcmJ1TU1LVStkY3M0OG0ySkZnc2FZSHJiK09tR05qYlZicitheFdrL3F1CnNsK3VFcW5ZMXhVU3BIalRmUHp0VGdWaG55Z21JSm9NNEFPWjB2bEJBQy9LQUFXOGdaWVNQczhLMHRCUlphdk8Kb0ZqTlh6ZjdBeEtGS1N4RERoSnJwWTQrNFlFOGc4MEJnSnQwZ3dMak1OMWpvdnMvUnQzdUkxNTQ5cWJMaHUrdgpIQ2VMR3NZUFNXY1AyMS9UOGQ1ZENzYWFEQTZVcktEVWpkOTZuZTJibFdZWDhsTWxOWVFYQWd2QUJQeHpYSmdrCkpKN1NIVzRkUGJKcFVUVDJiQ2ZoTUc5ZThIcDFHTGw1TDlMS1IzY2x2Yk00dHpJSzlpT0huak5JdHBCOWl2c2QKd2MxQnZiQU42amtVU0xBdFdpZ1hvc25yVWpUbTdQVjVzWE1CTWNYTkdPdVU1T0UrRXVEdjZOSklna2JKNWNPOApKd0trT1ZRTTB3SGljZHJMRTZOWmF2SytUTFMzTGNwTFB3WUJVZ05sRjRxZFhSVW5JS3hzWEg0NVo1NE5ZMktsCll2TDNFeVZ6bndEME1JdE8zWHlFK1dnOFBWaFlGdW9zbENPdDZrTzZJWWZtRjZKbXRiSVdVMytzS0N1dXVPUjcKNnllWUl4dlZWUXdjaWJyV0xxQzZpMmVBcUo4VzNTelEzc0plckQ2MkUrQ3dKUFRsczVVZFVaa29tNUN5NVF6YwpkanQ4dDB3RzhJU1p2ZzQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
