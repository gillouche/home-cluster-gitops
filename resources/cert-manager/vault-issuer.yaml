apiVersion: v1
kind: Secret
metadata:
  name: vault-issuer-token
  namespace: cert-manager
  annotations:
    kubernetes.io/service-account.name: cert-manager
type: kubernetes.io/service-account-token
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-issuer
spec:
  vault:
    server: https://192.168.0.253:8200
    path: pki_int/sign/homelab-server
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4akNDQXE2Z0F3SUJBZ0lVQ2xMY0hHVnJIQXFndytPcXMvbTNITngxY1BRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lqRWdNQjRHQTFVRUF4TVhTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd0hoY05Nall3TVRFeApNakkwTkRVMFdoY05NekV3TVRFd01qSTBOVEUwV2pBeU1UQXdMZ1lEVlFRREV5ZG9iMjFsYkdGaUxtbHVkR1Z5CmJtRnNJRWx1ZEdWeWJXVmthV0YwWlNCQmRYUm9iM0pwZEhrd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFERWdmM2Ewd3ZSZ05qTFJsVmhOR2FPTWhYTDJxaitTMG9FYkZLNGNZYVhNYUIrV1BHagpoYWxDYWtyVzBqMU9JRUkwZGNzNHBuRTVDQ1dmZlI0Q2FuQzlWT2JyeFJhaGh2WVE2RWVJMjRTa3dXaWZ2ckJHCmR3b2wxTzJmUi83UFdFUFBCVGNCSU5raGIyczlVSVdHTFhyOURIWWlJbWQrWkh5bEZ6cVE1UE0xdEcvTjFubG4KRU1EWnVKaWQxL2NhanhDeWszOEdPZUhiVEVQUC9YMkUrTVBRSXlXS1Z2Nk8rZ2ZVQmdFamtydGRva0lZK2hrNAo5bnVXK3pCUDFSeU1iNDFWaGVYR0x5RXljK3lFZnlYK3FWNHBOUThDeXN5VHdmTVQxR3U0RFRWbjhIVy9KZ3Y2CktOclU5QkNlaWpPT1JLVG11aDN5TGhZeGhUaS9FODJvTG1GTkFnTUJBQUdqZ2VNd2dlQXdEZ1lEVlIwUEFRSC8KQkFRREFnRUdNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkhYcnJGUjREeHJKZ29UUApnWHVrWVZDUjBMZ0NNQjhHQTFVZEl3UVlNQmFBRkYyNkVEd1llcS9oVjFVN0NveWpOZ3lOUG5wZE1FRUdDQ3NHCkFRVUZCd0VCQkRVd016QXhCZ2dyQmdFRkJRY3dBb1lsYUhSMGNITTZMeTh4T1RJdU1UWTRMakF1TWpVek9qRTQKTWpBd0wzWXhMM0JyYVM5allUQTNCZ05WSFI4RU1EQXVNQ3lnS3FBb2hpWm9kSFJ3Y3pvdkx6RTVNaTR4TmpndQpNQzR5TlRNNk1UZ3lNREF2ZGpFdmNHdHBMMk55YkRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQW1hZW1NcW9DCklCUCtNeDRTSE1BL1BCSnhCRElLeU5iNHNQb2MvTGF1emtxTHhvYVFsTkxZU1U2cjZNSTV3ZEFVOVc3MW81WUkKbG1hWDJJZUoyNGFHTjFJWngvWmFyL0tiS29jeW90Yk92QnpwSWFKSm8xZEVJNnk2Z05BamJkVzcvMXI0NnhKcwpUQkhhV0YrV3ZMc1lhRWl6Q25vSU5OcktuenBJa2NhZFBCSTZRaWI1YTNOUVYxR2dVeUxDTDltbVpqditYaWFyCng3d2RId1Q4WHNqZUVGeXVjazNNTlpvcjJXTmg0VHllWTFpQmN6QzdsWjRrT3d6cURLbDAyellDbHhnbm5BOEsKa2R3Zm5GUDJEMDRGcmZxOXJ0Z1hMejAwa1dRcVZJVkg5cXkwOHdTRmd4SExUOC9NTExsQlkwSmY0NlpEOFJkTQpUbE5vcStQL3kyV0tldz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0tLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJRWRUQ0NBbDJnQXdJQkFnSVVEVU8xZGlGZDRIQ1ppRGdRNnd5SURaQ1JXMzB3RFFZSktvWklodmNOQVFFTApCUUF3WHpFTE1Ba0dBMVVFQmhNQ1FrVXhFVEFQQmdOVkJBZ01DRUp5ZFhOelpXeHpNUkV3RHdZRFZRUUhEQWhDCmNuVnpjMlZzY3pFUU1BNEdBMVVFQ2d3SFNHOXRaV3hoWWpFWU1CWUdBMVVFQXd3UFNHOXRaV3hoWWlCU2IyOTAKSUVOQk1CNFhEVEkyTURFeE1USXhORFV4TkZvWERUTXhNREV4TURJeU5EVXhORm93SWpFZ01CNEdBMVVFQXhNWApTRzl0Wld4aFlpQkpiblJsY20xbFpHbGhkR1VnUTBFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3CmdnRUtBb0lCQVFDNTBXTjRLY2dTaXVZV3JUSXUvck9kUit2b0lZanJYelpSVGwydE9NODVGVkovclVVK0RZb0IKdVRZOHQyWm1SOCtYdnlVeU9uT2ZMZ2ZDbUErcVd0U1BnVDc4cnRJZ3ZsZWFSWG5WSlZVNE16dlRJZGVid29IVgorcFB4ZjhmVzFtdVVreWl3UHFSV1VXSytRSVU4Yi85blFqclVEYTNYbXg3VDdGemRWUXBDMGhGaHVrQ0VuSEhXCm4reWUycTVKbUJUU2Jham1RSGdpVjhSSlAxakJaNjJPanBTRVJzcFR4T1FDaWZsdGlNWk9UVFk1VHY1aUdsbDgKRHpxTGNKaGM0anVsTlREWHN2M0pjQnlBV0xML2dONmNtbHVUOXZqTy9hTUxEcE93a3BaMndQdFVtc0FqcDhwZgpGTjZWMlNrbk5sMC9wSFJ4QWoyMmtzNzJQUnhEYXdTdkFnTUJBQUdqWmpCa01CSUdBMVVkRXdFQi93UUlNQVlCCkFmOENBUUV3RGdZRFZSMFBBUUgvQkFRREFnRUdNQjBHQTFVZERnUVdCQlJkdWhBOEdIcXY0VmRWT3dxTW96WU0KalQ1NlhUQWZCZ05WSFNNRUdEQVdnQlJFN0xBOXZTZ1Z6VGdZQ29pUzRWanUzNUJkWURBTkJna3Foa2lHOXcwQgpBUXNGQUFPQ0FnRUFoWTNVREFSVjhaUmZpT0Z1UGZkdEFrQzdwdXpDeUxIcnV1U0NWNHIxME95cVhqcmZSS3BvCnFwM3FERlpKOUpURnJVQkpXTnlmYWF3WUpOQkhJQjRFQ2tPNWVrR2RvM3JjUTdaUmtzemR2MjNneFZGZVhLbVkKeFhHYU40ZU9MUVgxc245RnFCWUcvWkUzanRFbmtiNHlrRVdheWJLS1JmQ2pnQ3dLa01kTGRXWkp0OHMra2s4YgpiTXo0aTRHT21GN3N6QjVlQXNCREh4RWNGVGxVMDI0QnBscDRiOXZZeEtxRDZ4M3pqU0ZkTW9GYkdNaU5LS2ZFClRIeGpMOEgyMmpZZVlYbFNaVHNJRitrRTRmMXdlbkNFR2JDWW5vSmUvSndnYTBWdmZKQWVSRVZkV3lVZXg2aGMKSEZGYUE1aTV1T082ZjZTRURJQ3BjQUNPTmtDK3owY0NzeEFYRElTak1jZFlTY3l3djVoNnJMT0hNN0FYUUJhZwpHSWJPMmxxM3dhZkdDQmZVVC9vYnNMdmZCa0dWNHY1V1NvZWs1NXFmemRnL0VvVXh0VWlkQVZyaE1Qdm1aakZXCi8wNVlvN3V4MGZkVzJtdXJHRE9SNVJNYUIrdnpLSmRneU1OMWtIN1QyWDBsak50eHgrTGlwaTNsbEhMMUVYUHkKZmN4UUxBMEdQcExkZEdZaGRiVWN4cXRyeGlLUHhXQVN4MU45bUNOdFhZa0xWZXVRb2kwSytjekxab1dhMldtNgpWMTNJS3pqNk1Uck9lK3FwN1cyZ3hPOWtrQlhublBHQm5OcXorMFFzMnVyMUxmckVENW0zTDFuS0ZlSncwUHBICngrZERtYTBmdk9yMHlGT2tuUWhBN0txalRZL3NvQmZoa0xtbFY0UURQdWVrSnRDTGJNUXhFSmM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0tLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJRnB6Q0NBNCtnQXdJQkFnSUpBS1dCUW4ycDI3cGtNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1GOHhDekFKQmdOVgpCQVlUQWtKRk1SRXdEd1lEVlFRSURBaENjblZ6YzJWc2N6RVJNQThHQTFVRUJ3d0lRbkoxYzNObGJITXhFREFPCkJnTlZCQW9NQjBodmJXVnNZV0l4R0RBV0JnTlZCQU1NRDBodmJXVnNZV0lnVW05dmRDQkRRVEFlRncweU5qQXgKTURneU1qSTFNelZhRncwek5qQXhNRFl5TWpJMU16VmFNRjh4Q3pBSkJnTlZCQVlUQWtKRk1SRXdEd1lEVlFRSQpEQWhDY25WemMyVnNjekVSTUE4R0ExVUVCd3dJUW5KMWMzTmxiSE14RURBT0JnTlZCQW9NQjBodmJXVnNZV0l4CkdEQVdCZ05WQkFNTUQwaHZiV1ZzWVdJZ1VtOXZkQ0JEUVRDQ0FpSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnSVAKQURDQ0Fnb0NnZ0lCQU50cktrU0hoRmNZWC9QOC9EU1dzU0NwRWQxYWZ2WkRISldNWnRTdVp6ZE42dkpYMXZacwpTbVJmZHVlTmhHYm1TS1FRYk5kdXlDZ25lTmxSNDBocWdFWEZEUzMvVUJvU3RVSFNiVE8yQ01WWWhRUFZOWjRtCnI1Mkc4TnYvRExIQ293dGExSWppU2ZrbnQ0VE9VWitOOHpXQXVMZ2Q0OEozQnozVGhOcHdMRGExWm4yY2ZZdkUKNFFPSm5uMFJpOXhkUm1YQVZjSTZoaUdvYStNd2F2SWVhZFRJOFF3QUt4aUZNSnVDYmN2YzdKQXlxTnBiblVrWgp6THNrS2VwN1BWWElzOVBjVnJFZ2U1QXd3c01YMkRROTNTMFVDM2Q4VVZBTkptSnZlTVV6TWJQZkROVjNacVJSCm44S2d2RW1Hd1lLZDAvaFBGUWJjbGphNHkxcjNmN3l4L0N3NDVPRERKaDMxdUZkODY2amM4cE9EVEl1L3M1TTMKU0lrMlBSRi9MdFFkeGJFRU5XckJjRlFZQVlxTVhYakQ5bnUxMmQ1cml1TVhnWlllV2QzNVBvTUMxSHdKZ3ZWdQpla1Y1WlprUlRKcTF4SG9uSEROMStMaXBEbWtQMW05a3hmVkxqczJoeVFJSzgyUW1Cais2bFI5bnRYNm9zSDEvCkRQdzhlTWRZdFNqcld1MHUrQjM0RjlnUnJmem4vVjRIWW1wbENRd09vSzJZZ0dhUnYvOCswVDdkV0tNY1VpMUUKTERmbjUzdE9Lck1ETnI5R3A5c25OajE1REF2dGJiU1ZHK0xJMnhHZ3pCSU5WQjBZVHd6VWhNMzNIT1BRM3VEWApUVkg0VjlqNVZxRHdwSllneXZYakZJUCtzb3ZZQVNDbEMxL3ltS1FidFJIUWtGWTNJTWs5aGQvQkFnTUJBQUdqClpqQmtNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUl3RGdZRFZSMFBBUUgvQkFRREFnRUdNQjBHQTFVZERnUVcKQkJSRTdMQTl2U2dWelRnWUNvaVM0Vmp1MzVCZFlEQWZCZ05WSFNNRUdEQVdnQlJFN0xBOXZTZ1Z6VGdZQ29pUwo0Vmp1MzVCZFlEQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUF5SlRVNGRsSkMyTGdwekZBSC9Ja3VNT2ZRYW5ECjdyMUJnL1hUVkNVcnBaKzFjRFoxK0d6QXBSZ0NhVEtMdE5GN0VrZ1ZyZXVyTU9jbE1vaWE3Zjh6cEZYWVAyYUUKeWhNclhKTG5xUHdDZjk4bzloVWI0d2JUVUtPVHZ3eWxnam51cEdOcXQxcGY5QVVhRVRFRUMyQ1RGQTVsM0NsaQpLNjhTa1paT0tVbU9VUWxoVGdLM2hTcThid3RXR1N2REY0U2NHTnM0QTFxbjlIQmt1c2RSR0Q3Mis3V2d6OWpqCll6bm91N1lXeEU2M1VzRUxKZWw4cXZkbzdFaHRwR3VxTTA3MUJDTnNONG4rVVhZYVdUZ2hvRFZOdmZ3ekV3VzAKNld0OWpCQVh2djVEQWRqZFlNRTZTMDJCYmh5L0VneHc1U0FXUWVaV1NObGR4V1J1eFJJdE1OMCtTVjQ1Sjc5VQppc3drZEEwUGJOV1hsWGN6ZmJ0NzRtL0pQL1NuRmZBdGFZcEYwMHJTK2RiNERnRUhwYmNVbXVyc1Zlb205RGhrCmk2ZDhzR2pDWmlLbFVUL1QvM0lPUXkvODZtalQzSlNVOWQrZGF3cktJNjNnNDFadWNYcVdUVjBGMk1mdENSRzcKU0c0YmJJTUJLTmtRYnZwMm5TZTdrd2pobjJsTjQrV2JVR1VUVHY1Ni9vdTlNeEIzK2p4NUhHdkVPblU0L25MVApEcEQrN0tDVFZqSlVyMkJlNVhoU1cydW1LNjdxZ1N2cnFJRG1zUVBBbWQ3RmFTK1FYQUkwNm5MdW5EZTBmKzByClpLUHJUaTlXOC8wUGF3UUp6WjBienNuQkhOdGVMRkFLZS90OWhIZlIycmZxM2xxc3p0STE2NVU0VGFnWTlEbUsKTFJJUlVndDcrRVhZOEEwPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        secretRef:
          name: vault-issuer-token
          key: token
